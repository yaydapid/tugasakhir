(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[924],{2924:(L,P,d)=>{"use strict";d.r(P),d.d(P,{DashboardModule:()=>Kt});var _=d(9808),S=d(4738),m=d(3254),w=d(2497),t=d(5e3);let k=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-dashboard"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},directives:[w.lC],encapsulation:2}),a})();var C=d(3872),Z=d(2340),j=d(520);let x=(()=>{class a{constructor(e){this.httpClient=e,this.apiUrl=Z.N.apiUrl}addImage(e){return this.httpClient.post(this.apiUrl+"/image",e)}showImage(e){return this.httpClient.get(this.apiUrl+"/image/"+e)}addDocument(e){return this.httpClient.post(this.apiUrl+"/document",e)}showDocument(e){return this.httpClient.get(this.apiUrl+"/document/"+e)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(j.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var f=d(3075);function U(a,p){if(1&a&&(t.TgZ(0,"div",41)(1,"label",42),t._uU(2),t.qZA(),t._UZ(3,"input",43),t.TgZ(4,"span",44),t._uU(5),t.qZA()()),2&a){const e=p.$implicit,n=t.oxw();t.xp6(1),t.Q6J("for",e.id),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("id",e.id)("name",e.id)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data[e.id]),t.xp6(2),t.hij(" ",null==e?null:e.unit," ")}}function y(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",46)(2,"img",47),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(22).click()}),t.qZA()()()}if(2&a){const e=p.$implicit;t.Q6J("ngClass",0==p.index?"active":""),t.xp6(2),t.Q6J("src",e.src,t.LSH)("alt",null==e?null:e.alt)}}function M(a,p){if(1&a&&(t.TgZ(0,"nb-option",48),t._uU(1),t.qZA()),2&a){const e=p.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const Q=function(a){return{display:a}},Y=function(){return[1,2,3,4]};let N=(()=>{class a{constructor(e,n){this.dialog=e,this.pageMenuService=n,this.apiUrl=Z.N.apiUrl,this.spesificationItem=[{id:"piping_id",name:"Piping Id"},{id:"piping_name",name:"Piping Name",unbit:"mm"},{id:"nominal_pipe_size",name:"Nominal Pipe Size"},{id:"pipe_design_code",name:"Pipe Design Code"},{id:"schedule",name:"Schedule"},{id:"outside_diameter",name:"Outside Diameter",unit:"mm"},{id:"longtd_quality_factor",name:"Longtd. Quality Factor (E)"},{id:"weld_joint_factor",name:"Weld Joint Factor (W)"},{id:"allowable_unit_stress",name:"Allowable Unit Stress (S)",unit:"psi"},{id:"coefficient",name:"Coefficient (Y)"},{id:"min_design_pressure",name:"Min. Design Pressure (P min)",unit:"psig"},{id:"max_design_pressure",name:"Max. Design Pressure (P max)",unit:"psig"},{id:"min_design_temperature",name:"Min. Design Temperature (T min)",unit:"F"},{id:"max_design_temperature",name:"Max Design Temperature (T max)",unit:"F"},{id:"corrosion_allowance",name:"Corrosion Allowance",unit:"mm"},{id:"mechanical_allowance",name:"Mechanical Allowances",unit:"mm"},{id:"min_structural_thickness",name:"Min. Structural Thickness",unit:"mm"},{id:"min_alert_thickness",name:"Min. Alert Thickness",unit:"mm"},{id:"nominal_thickness",name:"Nominal Thickness",unit:"mm"}],this.imageLink=[]}ngOnInit(){var e,n;const o=null===(n=null===(e=this.dialogData)||void 0===e?void 0:e.data)||void 0===n?void 0:n.images;o&&(this.imageLink=o.map(u=>({src:this.apiUrl+"/image/"+u,alt:"Piping Assets"})))}parseToInt(e){return parseInt(e)}onFileChange(e){const n=e.target.files;this.uploadImageFile=n;for(let u of n){var o=new FileReader;o.readAsDataURL(u),o.onload=g=>{this.imageLink.push({src:g.target.result,alt:u.name})}}}onUploadAttachment(e){const n=e.target.files[0],o=new FormData;o.append("document",n),this.pageMenuService.addDocument(o).subscribe(({data:u})=>{this.attachment=u.id})}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{image:this.uploadImageFile,attachment:this.attachment}),this.dialog.close(e))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.X4l),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-add-assets"]],inputs:{dialogData:"dialogData"},decls:58,vars:14,consts:[[1,"w-100","d-flex","justify-content-center","mt-5"],[1,"mt-5",2,"max-height","35rem","min-width","90rem"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["addAssetsForm","ngForm"],[1,"row"],[1,"col-8"],[1,"row","row-cols-3"],["class","col mb-2",4,"ngFor","ngForOf"],[1,"col-4"],["id","carouselExampleInterval","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item","data-bs-interval","10000",3,"ngClass",4,"ngFor","ngForOf"],["for","addImage"],["placeholder","Add image","multiple","","fullWidth","","nbInput","","type","file","accept","image/png, image/gif, image/jpeg","id","addImage",2,"display","none",3,"ngStyle","change"],["addImage",""],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"row","row-cols-2"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","date_in_service","required","",3,"nbDatepicker","ngModel"],["datepicker",""],["for","class",1,"mb-1","d-block"],["placeholder","Class","size","small","status","primary","name","class",1,"",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","notes",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","notes","name","notes",3,"ngModel"],["for","addAttach",1,"d-block","mb-1"],["fullWidth","","fieldSize","tiny","nbInput","","type","file","id","addAttach","accept","application/pdf","id","addAttachment","name","attachment","ngModel","",3,"change"],["addAttach",""],["for","recomendation",1,"d-block","mb-1"],["fullWidth","","nbInput","","name","recomendation","id","recomendation","rows","2",3,"ngModel"],[1,"d-flex","justify-content-center"],["nbButton","","status","success","type","submit",1,"m-1","w-100",3,"disabled"],[1,"col","mb-2"],[1,"d-block",2,"font-size",".9rem",3,"for"],["fieldSize","small","required","","nbInput","","type","text",1,"col-8",3,"id","name","ngModel"],[1,"col"],["data-bs-interval","10000",1,"carousel-item",3,"ngClass"],[1,"overflow-hidden","d-flex","align-justify-center",2,"height","13rem"],[1,"w-100",3,"src","alt","click"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"nb-card",1)(2,"nb-card-header",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.closeDialog()}),t._UZ(7,"nb-icon",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(o);const g=t.MAs(10);return n.closeDialog(g.value)}),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11),t.YNc(14,U,6,6,"div",12),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14)(17,"div",15),t.YNc(18,y,3,3,"div",16),t.TgZ(19,"label",17),t._uU(20,"Image"),t.qZA(),t.TgZ(21,"input",18,19),t.NdJ("change",function(g){return n.onFileChange(g)}),t.qZA()(),t.TgZ(23,"button",20),t._UZ(24,"span",21),t.TgZ(25,"span",22),t._uU(26,"Previous"),t.qZA()(),t.TgZ(27,"button",23),t._UZ(28,"span",24),t.TgZ(29,"span",22),t._uU(30,"Next"),t.qZA()()(),t.TgZ(31,"div",25)(32,"div")(33,"label",26),t._uU(34,"Date In Service"),t.qZA(),t._UZ(35,"input",27)(36,"nb-datepicker",null,28),t.qZA(),t.TgZ(38,"div")(39,"label",29),t._uU(40,"Class"),t.qZA(),t.TgZ(41,"nb-select",30),t.YNc(42,M,2,2,"nb-option",31),t.qZA()(),t.TgZ(43,"div")(44,"label",32),t._uU(45,"Notes"),t.qZA(),t._UZ(46,"input",33),t.qZA(),t.TgZ(47,"div")(48,"label",34),t._uU(49,"Attachment"),t.qZA(),t.TgZ(50,"input",35,36),t.NdJ("change",function(g){return n.onUploadAttachment(g)}),t.qZA()()()()(),t.TgZ(52,"label",37),t._uU(53,"Recomendation"),t.qZA(),t._UZ(54,"textarea",38),t.TgZ(55,"div",39)(56,"button",40),t._uU(57,"Add Asset"),t.qZA()()()()()()}if(2&e){const o=t.MAs(10),u=t.MAs(37);t.xp6(4),t.Oqu(null==n.dialogData?null:n.dialogData.title),t.xp6(10),t.Q6J("ngForOf",n.spesificationItem),t.xp6(4),t.Q6J("ngForOf",n.imageLink),t.xp6(3),t.Q6J("ngStyle",t.VKq(11,Q,n.imageLink.length?"none":"block")),t.xp6(14),t.Q6J("nbDatepicker",u)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.date_in_service),t.xp6(6),t.Q6J("ngModel",n.parseToInt(null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.class)),t.xp6(1),t.Q6J("ngForOf",t.DdM(13,Y)),t.xp6(4),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.notes),t.xp6(8),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.recomendation),t.xp6(2),t.Q6J("disabled",!o.form.valid)}},directives:[m.Asz,m.ndF,m.DPz,m.fMN,m.yKW,f._Y,f.JL,f.F,_.sg,m.h8i,f.Fj,f.Q7,f.JJ,f.On,_.mk,_.PC,m.$kf,m.B4C,m.rs,m.q51],encapsulation:2}),a})();var I=d(3858),F=d(7625),J=d(8929),tt=d(2185),E=d(574),ht=d(9441),H=(d(7456),d(8539)),ft=d(7024);function et(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const u=t.CHM(e).$implicit,g=t.MAs(2),r=t.oxw();return"New"==u.name?r.addAssets():"Import"==u.name?g.click():"Export"==u.name?r.exportExcelFile():"Print"==u.name?r.printAssets():null}),t.TgZ(1,"input",3,4),t.NdJ("change",function(o){return t.CHM(e),t.oxw().importExcelFile(o)}),t.qZA(),t._UZ(3,"nb-icon",5),t.TgZ(4,"span"),t._uU(5),t.qZA()()}if(2&a){const e=p.$implicit,n=t.oxw();let o;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(3),t.Q6J("icon",e.icon)("pack",null!==(o=e.pack)&&void 0!==o?o:"eva"),t.xp6(2),t.Oqu(e.name)}}const W=function(){return{name:"New",icon:"plus-outline"}},bt=function(){return{name:"Import",icon:"download-outline"}},_t=function(){return{name:"Export",icon:"upload-outline"}},vt=function(){return{name:"Print",icon:"printer-outline"}},xt=function(a,p,e,n){return[a,p,e,n]};let Ct=(()=>{class a{constructor(e,n,o,u,g,r){this.assetsService=e,this.dialogService=n,this.toastrService=o,this.pageMenuService=u,this.datePipe=g,this.variables=r,this.destroy$=new J.xQ,this.tableHeader={title:"Piping Assets",filter:[{name:"Class",value:["All",1,2,3,4],title:"class-assets"}]},this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"piping_id",head:"Piping Id",width:"100px"},{type:"text",prop:"piping_name",head:"Piping Name",width:"200px"},{type:"text",prop:"date_in_service",head:"Date In Service",width:"200px"},{type:"text",prop:"class",head:"Class",width:"200px"},{type:"text",prop:"tm_inspection_interval",head:"TM Inspection Interval",width:"200px"},{type:"text",prop:"ve_inspection_interval",head:"VE Inspection Interval",width:"200px"},{type:"text",prop:"notes",head:"Notes",width:"200px"},{type:"button",prop:"edit",width:"80px",button:[{icon:"edit-outline",status:"info",title:"edit-assets"},{icon:"trash-2-outline",status:"danger",title:"delete-assets"}]}],this.dataSubject=new tt.c,this.transformExcelDate=i=>null==i?"":new Date(Math.round(86400*(i-25569)*1e3))}ngOnInit(){this.assetsService.getPipingAssets().subscribe(({data:e})=>{this.tableData=e.map(n=>{let{tm_inspection_interval:o,ve_inspection_interval:u}=n;return({tm_inspection_interval:o,ve_inspection_interval:u}=this.variables.getInspectionInt(n)),o=o?o.toFixed(1):0,u=u?u.toFixed(1):0,Object.assign(Object.assign({},n),{tm_inspection_interval:o,ve_inspection_interval:u})}),this.viewTable.regenerateTable(this.tableData)},()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."))}onClickTable(e,n){"delete-assets"==n&&this.deleteAsset(e),"edit-assets"==n&&this.updateAssets(e),"class-assets"==n&&this.filterByClass(e),"Export To Excel"==n&&this.exportExcelFile()}filterByClass(e){if("All"==e)this.viewTable.regenerateTable(this.tableData);else{const n=this.tableData.filter(o=>o.class==e);this.viewTable.regenerateTable(n)}}uploadImage(e){const n=new FormData;n.append("image",e),this.pageMenuService.addImage(n).pipe((0,F.R)(this.destroy$)).subscribe(o=>{this.dataSubject.next(o),this.dataSubject.complete()},()=>this.toastrService.danger("Please check your connection and try again.","Failed to upload image."))}addAssets(){this.dialogService.open(N,{context:{dialogData:{title:"Add Assets"}}}).onClose.subscribe(e=>{!e||this.reconstructAssetsData(e,"add")})}updateAssets(e){this.dialogService.open(N,{context:{dialogData:{title:"Update Assets",data:Object.assign(Object.assign({},e),{date_in_service:new Date(e.date_in_service)})}}}).onClose.subscribe(n=>{!n||this.reconstructAssetsData(n,"update",e)})}reconstructAssetsData(e,n,o=null){const{image:u}=e,g=Object.assign(Object.assign(Object.assign({},o),e),{date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});if(u)for(let r of u)this.uploadImage(r);this.dataSubject.asObservable().pipe((0,F.R)(this.destroy$)).subscribe(r=>{var i;let s=[...null!==(i=null==o?void 0:o.images)&&void 0!==i?i:[]],l=r.data.id;for(let c=l;c<l+u.length;c++)s.push(c);g.images=s,"add"==n&&this.onUploadaddAsset(g),"update"==n&&this.onUploadUpdateAsset(g)}),"add"==n&&!u&&this.onUploadaddAsset(g),"update"==n&&!u&&this.onUploadUpdateAsset(g)}onUploadaddAsset(e){this.assetsService.addPipingAssets(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}onUploadUpdateAsset(e){this.assetsService.updatePipingAssets(e).pipe((0,F.R)(this.destroy$)).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been updated.","Your request success."))}deleteAsset(e){this.dialogService.open(C.F,{context:{dialogData:{title:"Delete Assets",name:e.piping_name,id:e.id}}}).onClose.subscribe(n=>{n&&this.assetsService.deletePipingAssets(n.id).pipe((0,F.R)(this.destroy$)).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been delete.","Your request success."))})}exportExcelFile(){const e=this.viewTable.selectTableRow(),o={Sheets:{"Piping Assets":E.P6.json_to_sheet(e)},SheetNames:["Piping Assets"]},u=E.cW(o,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(u,"Assets")}saveAsExcelFile(e,n){const o=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ht.saveAs(o,n+"_PIPING_MONITORING_"+(new Date).getTime()+".xlsx")}importExcelFile(e){const n=e.target.files[0];if(!n)return;const o=new FileReader;o.readAsBinaryString(n),o.onload=u=>{const i=E.ij(u.target.result,{type:"binary"}).Sheets["Data Assets"];let s=0,l=!0;for(;l;){if(s>100&&(l=!1),i["A"+s]){l=!1;break}s++}const c=E.P6.sheet_to_json(i,{range:s-1,defval:""});this.reconstructDataExcel(c)}}reconstructDataExcel(e){e=e.map(n=>{let{"Piping ID":o,"Piping Name":u,NPS:g,"Pipe Design Code":r,Schedule:i,"Outside Diameter":s,"Long. Quality Factor":l,"Weld Joint Factor":c,"Allowable Stress":h,Coefficient:v,"Min. Design Pressure":b,"Max. Design Pressure":T,"Min. Design Temperature":A,"Max. Design Temperature":D,"Corrosion Allowance":q,"Mechanical Allowance":te,"Min. Structural Thickness":ee,"Min. Alert Thickness":ne,"Nominal Thickness":ie,"Date in Service":$t,Notes:se,Recomendation:oe,Class:ae}=n;return $t=this.datePipe.transform(this.transformExcelDate($t),"yyyy-MM-dd"),{piping_id:o,piping_name:u,nominal_pipe_size:g,pipe_design_code:r,schedule:i,outside_diameter:s,longtd_quality_factor:l,weld_joint_factor:c,allowable_unit_stress:h,coefficient:v,min_design_pressure:b,max_design_pressure:T,min_design_temperature:A,max_design_temperature:D,corrosion_allowance:q,mechanical_allowance:te,min_structural_thickness:ee,min_alert_thickness:ne,nominal_thickness:ie,date_in_service:$t,notes:se,recomendation:oe,class:ae}}),this.assetsService.importAsset(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been delete.","Your request success."))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(H.M),t.Y36(m.Gln),t.Y36(m.quB),t.Y36(x),t.Y36(_.uU),t.Y36(ft.L))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-piping-assets"]],viewQuery:function(e,n){if(1&e&&t.Gf(I.V,5),2&e){let o;t.iGM(o=t.CRH())&&(n.viewTable=o.first)}},decls:4,vars:13,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData","onClickTable"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],["type","file","accept",".xls,.xlsx",2,"display","none",3,"change"],["importExcel",""],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,et,6,4,"button",0),t.qZA()(),t.TgZ(3,"ngx-mat-table",1),t.NdJ("onClickTable",function(u){return n.onClickTable(u.data,u.title)}),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.l5B(8,xt,t.DdM(4,W),t.DdM(5,bt),t.DdM(6,_t),t.DdM(7,vt))),t.xp6(1),t.Q6J("tableHeader",n.tableHeader)("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[m.Asz,m.yKW,_.sg,m.DPz,m.fMN,I.V],encapsulation:2}),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function V(a,p){if(1&a&&(t.TgZ(0,"nb-option",43),t._uU(1),t.qZA()),2&a){const e=p.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",null==e?null:e.piping_id," ")}}function nt(a,p){if(1&a&&(t.TgZ(0,"nb-option",43),t._uU(1),t.qZA()),2&a){const e=p.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function R(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"div",44)(1,"div",45)(2,"img",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(52).click()}),t.qZA()()()}if(2&a){const e=p.$implicit;t.Q6J("ngClass",0==p.index?"active":""),t.xp6(2),t.Q6J("src",e.src,t.LSH)("alt",null==e?null:e.alt)}}const K=function(){return[]},it=function(){return[1,2,3,4]},At=function(a){return{display:a}};let st=(()=>{class a{constructor(e,n,o){this.dialog=e,this.assetsService=n,this.pageMenuService=o,this.apiUrl=Z.N.apiUrl,this.imageLink=[]}ngOnInit(){var e,n;this.assetsService.getPipingAssets().subscribe(({data:u})=>{this.piping=u.filter(g=>{var r,i;return!g.piping_circuit||(null===(i=null===(r=this.dialogData)||void 0===r?void 0:r.data)||void 0===i?void 0:i.piping_id.includes(g.id))})});const o=null===(n=null===(e=this.dialogData)||void 0===e?void 0:e.data)||void 0===n?void 0:n.images;o&&(this.imageLink=o.map(u=>({src:this.apiUrl+"/image/"+u,alt:"Piping Assets"})))}onUploadAttachment(e){const n=e.target.files[0],o=new FormData;o.append("document",n),this.pageMenuService.addDocument(o).subscribe(({data:u})=>{this.attachment=u.id})}onFileChange(e){const n=e.target.files;this.uploadImageFile=n;for(let u of n){var o=new FileReader;o.readAsDataURL(u),o.onload=g=>{this.imageLink.push({src:g.target.result,alt:u.name})}}}parseInt(e){return e?parseInt(e):null}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{image:this.uploadImageFile,attachment:this.attachment}),this.dialog.close(e))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.X4l),t.Y36(H.M),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-add-circuit"]],inputs:{dialogData:"dialogData"},decls:60,vars:19,consts:[[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"mt-5",2,"max-height","35rem","min-width","90rem"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["addCircuitForm","ngForm"],[1,"row"],[1,"col-6"],["for","piping_circuit_id",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","piping_circuit_id","name","piping_circuit_id","required","",3,"ngModel"],["for","piping_id",1,"mb-1","d-block"],["multiple","","placeholder","Select Assets","name","piping_id",2,"min-width","35rem",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","piping_circuit_name",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","piping_circuit_name","name","piping_circuit_name","required","",3,"ngModel"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","date_in_service","required","",3,"nbDatepicker","ngModel"],["datepicker",""],["for","class",1,"mb-1","d-block"],["placeholder","Class","size","small","status","primary","name","class","required","",3,"ngModel"],["for","notes",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","notes","name","notes",3,"ngModel"],["for","addAttach",1,"d-block","mb-1"],["fullWidth","","fieldSize","tiny","nbInput","","type","file","id","addAttach","accept","application/pdf","id","addAttachment","name","attachment","ngModel",""],["addAttach",""],[1,"col-6","align-self-center"],["id","carouselExampleInterval","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item","data-bs-interval","10000",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["placeholder","Add image","multiple","","fullWidth","","nbInput","","type","file","accept","image/png, image/gif, image/jpeg","id","addImage",2,"display","none",3,"ngStyle","change"],["addImage",""],["for","recomendation",1,"d-block","mb-1"],["fullWidth","","nbInput","","name","recomendation","id","recomendation","rows","2","name","recomendation",3,"ngModel"],[1,"d-flex","justify-content-center"],["nbButton","","status","success","type","submit",1,"m-1","w-100",3,"disabled"],[3,"value"],["data-bs-interval","10000",1,"carousel-item",3,"ngClass"],[1,"overflow-hidden","d-flex","align-justify-center",2,"height","18rem"],[1,"w-100",3,"src","alt","click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"nb-card",1)(2,"nb-card-header",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.closeDialog()}),t._UZ(7,"nb-icon",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(o);const g=t.MAs(10);return n.closeDialog(g.value)}),t.TgZ(11,"div",9)(12,"div",10)(13,"label",11),t._uU(14,"Piping Circuit Id"),t.qZA(),t._UZ(15,"input",12),t.TgZ(16,"label",13),t._uU(17,"Piping Id"),t.qZA(),t.TgZ(18,"nb-select",14),t.YNc(19,V,2,2,"nb-option",15),t.qZA(),t.TgZ(20,"label",16),t._uU(21,"Piping Circuit Name"),t.qZA(),t._UZ(22,"input",17),t.TgZ(23,"label",18),t._uU(24,"Date In Service"),t.qZA(),t._UZ(25,"input",19)(26,"nb-datepicker",null,20),t.TgZ(28,"label",21),t._uU(29,"Class"),t.qZA(),t.TgZ(30,"nb-select",22),t.YNc(31,nt,2,2,"nb-option",15),t.qZA(),t.TgZ(32,"label",23),t._uU(33,"Notes"),t.qZA(),t._UZ(34,"input",24),t.TgZ(35,"label",25),t._uU(36,"Attachment"),t.qZA(),t._UZ(37,"input",26,27),t.qZA(),t.TgZ(39,"div",28)(40,"div",29)(41,"div",30),t.YNc(42,R,3,3,"div",31),t.qZA(),t.TgZ(43,"button",32),t._UZ(44,"span",33),t.TgZ(45,"span",34),t._uU(46,"Previous"),t.qZA()(),t.TgZ(47,"button",35),t._UZ(48,"span",36),t.TgZ(49,"span",34),t._uU(50,"Next"),t.qZA()()(),t.TgZ(51,"input",37,38),t.NdJ("change",function(g){return n.onFileChange(g)}),t.qZA()(),t.TgZ(53,"div")(54,"label",39),t._uU(55,"Recomendation"),t.qZA(),t._UZ(56,"textarea",40),t.qZA(),t.TgZ(57,"div",41)(58,"button",42),t._uU(59),t.qZA()()()()()()()}if(2&e){const o=t.MAs(10),u=t.MAs(27);let g;t.xp6(4),t.Oqu(null==n.dialogData?null:n.dialogData.title),t.xp6(11),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_circuit_id),t.xp6(3),t.Q6J("ngModel",null!==(g=null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_id)&&void 0!==g?g:t.DdM(15,K)),t.xp6(1),t.Q6J("ngForOf",n.piping),t.xp6(3),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_circuit_name),t.xp6(3),t.Q6J("nbDatepicker",u)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.date_in_service),t.xp6(5),t.Q6J("ngModel",n.parseInt(null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.class)),t.xp6(1),t.Q6J("ngForOf",t.DdM(16,it)),t.xp6(3),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.notes),t.xp6(8),t.Q6J("ngForOf",n.imageLink),t.xp6(9),t.Q6J("ngStyle",t.VKq(17,At,n.imageLink.length?"none":"block")),t.xp6(5),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.recomendation),t.xp6(2),t.Q6J("disabled",!o.form.valid),t.xp6(1),t.Oqu(null==n.dialogData?null:n.dialogData.title)}},directives:[m.Asz,m.ndF,m.DPz,m.fMN,m.yKW,f._Y,f.JL,f.F,m.h8i,f.Fj,f.Q7,f.JJ,f.On,m.rs,_.sg,m.q51,m.$kf,m.B4C,_.mk,_.PC],encapsulation:2}),a})();var Tt=d(2787);function ot(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const u=t.CHM(e).$implicit,g=t.MAs(2),r=t.oxw();return"New"==u.name?r.addCircuit():"Import"==u.name?g.click():"Export"==u.name?r.export():"Print"==u.name?r.printCircuit():null}),t.TgZ(1,"input",3,4),t.NdJ("change",function(o){return t.CHM(e),t.oxw().importExcelFile(o)}),t.qZA(),t._UZ(3,"nb-icon",5),t.TgZ(4,"span"),t._uU(5),t.qZA()()}if(2&a){const e=p.$implicit,n=t.oxw();let o;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(3),t.Q6J("icon",e.icon)("pack",null!==(o=e.pack)&&void 0!==o?o:"eva"),t.xp6(2),t.Oqu(e.name)}}const Mt=function(){return{name:"New",icon:"plus-outline"}},Dt=function(){return{name:"Import",icon:"download-outline"}},at=function(){return{name:"Export",icon:"upload-outline"}},Zt=function(){return{name:"Print",icon:"printer-outline"}},Pt=function(a,p,e,n){return[a,p,e,n]};let rt=(()=>{class a{constructor(e,n,o,u,g){this.circuitService=e,this.dialogService=n,this.toastrService=o,this.datePipe=u,this.pageMenuService=g,this.tableHeader={title:"Piping Circuits",filter:[{name:"Class",value:["All",1,2,3,4],title:"class-circuit"}]},this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"piping_circuit_id",head:"Piping Circuit Id",width:"100px"},{type:"text",prop:"piping_circuit_name",head:"Piping Circuit Name",width:"200px"},{type:"text",prop:"date_in_service",head:"Date In Service",width:"200px"},{type:"text",prop:"class",head:"Class",width:"200px"},{type:"text",prop:"notes",head:"Notes",width:"200px"},{type:"button",prop:"edit",width:"80px",button:[{icon:"edit-outline",status:"info",title:"update-circuits"},{icon:"trash-2-outline",status:"danger",title:"delete-circuits"}]}],this.dataSubject=new tt.c}ngOnInit(){this.circuitService.getPipingCircuits().subscribe(({data:e})=>{this.tableData=e,this.viewTable.regenerateTable(e)})}onClickTable(e,n){if("class-circuit"==n)if("All"==e)this.viewTable.regenerateTable(this.tableData);else{const o=this.tableData.filter(u=>u.class==e);this.viewTable.regenerateTable(o)}"update-circuits"==n&&this.updateCircuit(e),"delete-circuits"==n&&this.deleteCircuit(e)}uploadImage(e){const n=new FormData;n.append("image",e),this.pageMenuService.addImage(n).subscribe(o=>{this.dataSubject.next(o),this.dataSubject.complete()},()=>this.toastrService.danger("Please check your connection and try again.","Failed to upload image."))}addCircuit(){this.dialogService.open(st,{context:{dialogData:{title:"Add Circuit"}}}).onClose.subscribe(e=>{!e||this.reconstructDataCircuit(e,"add")})}updateCircuit(e){const n=e.piping.map(o=>o.id);this.dialogService.open(st,{context:{dialogData:{title:"Update Circuit",data:Object.assign(Object.assign({},e),{date_in_service:new Date(e.date_in_service),piping_id:n})}}}).onClose.subscribe(o=>{!o||this.reconstructDataCircuit(o,"update",e)})}reconstructDataCircuit(e,n,o=null){const{image:u}=e;if(u)for(let r of u)this.uploadImage(r);this.dataSubject.asObservable().subscribe(r=>{var i;let s=[...null!==(i=null==o?void 0:o.images)&&void 0!==i?i:[]],l=r.data.id;for(let h=l;h<l+u.length;h++)s.push(h);const c=Object.assign(Object.assign(Object.assign({},o),e),{images:s,date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});console.log(c),"add"==n&&this.onUploadaddCircuit(c),"update"==n&&this.onUploadUpdateCircuit(c)});const g=Object.assign(Object.assign(Object.assign({},o),e),{date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});"add"==n&&!u&&this.onUploadaddCircuit(g),"update"==n&&!u&&this.onUploadUpdateCircuit(g)}onUploadaddCircuit(e){this.circuitService.addPipingCircuits(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}onUploadUpdateCircuit(e){this.circuitService.updatePipingCircuits(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}deleteCircuit(e){this.dialogService.open(C.F,{context:{dialogData:{title:"Add Circuit",name:e.piping_circuit_name,id:e.id}}}).onClose.subscribe(n=>{!n||this.circuitService.deletePipingCircuits(n.id).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Tt.t),t.Y36(m.Gln),t.Y36(m.quB),t.Y36(_.uU),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-piping-circuits"]],viewQuery:function(e,n){if(1&e&&t.Gf(I.V,5),2&e){let o;t.iGM(o=t.CRH())&&(n.viewTable=o.first)}},decls:4,vars:13,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData","onClickTable"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],["type","file","accept",".xls,.xlsx",2,"display","none",3,"change"],["importExcel",""],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,ot,6,4,"button",0),t.qZA()(),t.TgZ(3,"ngx-mat-table",1),t.NdJ("onClickTable",function(u){return n.onClickTable(u.data,u.title)}),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.l5B(8,Pt,t.DdM(4,Mt),t.DdM(5,Dt),t.DdM(6,at),t.DdM(7,Zt))),t.xp6(1),t.Q6J("tableHeader",n.tableHeader)("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[m.Asz,m.yKW,_.sg,m.DPz,m.fMN,I.V],encapsulation:2}),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var O=d(4204),lt=d(4107),$=d(3252);const z=function(a){return{color:a}};function St(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,36),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const u=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionCircuit==u?"#0492c2":"black"})("click",function(){const u=t.CHM(e).index;return t.oxw(2).selectCircuit(u)}),t._uU(3),t.qZA()()}if(2&a){const e=p.$implicit,n=p.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,z,o.selectionCircuit==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_circuit_name," ")}}function ct(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,37),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const u=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionPipe==u?"#0492c2":"black"})("click",function(){const o=t.CHM(e),u=o.index,g=o.$implicit;return t.oxw(2).selectPipe(u,g)}),t._uU(3),t.qZA()()}if(2&a){const e=p.$implicit,n=p.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,z,o.selectionPipe==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_id," ")}}function Ut(a,p){if(1&a&&(t.TgZ(0,"nb-list-item",34)(1,"span",null,37),t._uU(3),t.qZA()()),2&a){const e=p.$implicit;t.xp6(3),t.hij(" ",null==e?null:e.piping_id," ")}}function wt(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",38),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw(2).selectInspectionType(u)}),t._uU(1),t.qZA()}if(2&a){const e=p.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function It(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"nb-list-item",39)(1,"span",35,40),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const u=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionMethod==u?"#0492c2":"black"})("click",function(){const u=t.CHM(e).index;return t.oxw(2).selectMethod(u)}),t._uU(3),t.qZA()()}if(2&a){const e=p.$implicit,n=p.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,z,o.selectionMethod==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",null==e?null:e.name," ")}}function kt(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,41),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const u=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionTechnique==u?"#0492c2":"black"})("click",function(){const o=t.CHM(e),u=o.index,g=o.$implicit;return t.oxw(2).selectTechnique(u,g.name)}),t._uU(3),t.qZA()()}if(2&a){const e=p.$implicit,n=p.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,z,o.selectionTechnique==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",null==e?null:e.name," ")}}function Ft(a,p){if(1&a&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",null==e?null:e.method," ")}}function dt(a,p){if(1&a&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",null==e?null:e.technique," ")}}function Et(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"nb-list-item",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(){const u=t.CHM(e).index;return t.oxw(2).activationMethod(u)}),t.TgZ(3,"div",45)(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"nb-icon",46),t.qZA()(),t.TgZ(7,"span",47),t._uU(8),t.qZA(),t.YNc(9,Ft,2,1,"span",48),t.YNc(10,dt,2,1,"span",48),t._UZ(11,"input",49),t.TgZ(12,"div",50)(13,"button",6),t.NdJ("click",function(){const u=t.CHM(e).index;return t.oxw(2).deleteMethod(u)}),t._UZ(14,"nb-icon",51),t.qZA()()()()}if(2&a){const e=p.$implicit,n=p.index;t.xp6(5),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("icon",null!=e&&e.active?"radio-button-on-outline":"radio-button-off-outline")("status",null!=e&&e.active?"success":"basic"),t.xp6(2),t.hij(" ",null==e?null:e.type," "),t.xp6(1),t.Q6J("ngIf",null==e?null:e.method),t.xp6(1),t.Q6J("ngIf",null==e?null:e.technique)}}const Ot=function(){return["Instrusive","Non Instrusive"]};function G(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"nb-card",2)(2,"nb-card-header",3)(3,"h5",4),t._uU(4),t.qZA(),t.TgZ(5,"div",5)(6,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t._UZ(7,"nb-icon",7),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",8,9),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(10);return t.oxw().closeDialog(o.value)}),t.TgZ(11,"h6"),t._uU(12,"IN"),t.qZA(),t.TgZ(13,"section")(14,"nb-card",10)(15,"nb-card-body",3)(16,"div",4)(17,"span",11),t._uU(18,"Circuit ID"),t.qZA(),t.TgZ(19,"nb-list"),t.YNc(20,St,4,4,"nb-list-item",12),t.qZA()(),t.TgZ(21,"div",13)(22,"span",11),t._uU(23,"Piping ID"),t.qZA(),t.TgZ(24,"nb-list"),t.YNc(25,ct,4,4,"nb-list-item",12),t.qZA()(),t.TgZ(26,"div",13)(27,"span",11),t._uU(28,"Choosen Pipe"),t.qZA(),t.TgZ(29,"nb-list"),t.YNc(30,Ut,4,1,"nb-list-item",12),t.qZA()()()(),t.TgZ(31,"div")(32,"div",14)(33,"div")(34,"label",15),t._uU(35,"Proposal ID"),t.qZA(),t._UZ(36,"input",16),t.qZA(),t.TgZ(37,"div")(38,"label",15),t._uU(39,"Inspection Planned Date"),t.qZA(),t._UZ(40,"input",17)(41,"nb-datepicker",null,18),t.qZA(),t.TgZ(43,"div")(44,"label",15),t._uU(45,"Recomendation Date"),t.qZA(),t._UZ(46,"input",19)(47,"nb-datepicker",null,20),t.qZA()(),t.TgZ(49,"div",4)(50,"label",21),t._uU(51,"Remarks"),t.qZA(),t._UZ(52,"textarea",22),t.qZA()()(),t.TgZ(53,"h6",23),t._uU(54,"Inspection Method"),t.qZA(),t.TgZ(55,"section",24)(56,"div",25)(57,"mat-form-field",26)(58,"mat-label"),t._uU(59,"Inspection Type"),t.qZA(),t.TgZ(60,"mat-select"),t.YNc(61,wt,2,2,"mat-option",27),t.qZA()()(),t.TgZ(62,"div",28)(63,"nb-card")(64,"nb-card-body",3)(65,"div",29)(66,"span",11),t._uU(67,"Inspection Method"),t.qZA(),t.TgZ(68,"nb-list"),t.YNc(69,It,4,4,"nb-list-item",30),t.qZA()(),t.TgZ(70,"div",4)(71,"span",11),t._uU(72,"Inspection Technique"),t.qZA(),t.TgZ(73,"nb-list"),t.YNc(74,kt,4,4,"nb-list-item",12),t.qZA()()()()(),t.TgZ(75,"div",28)(76,"nb-card",31)(77,"nb-list"),t.YNc(78,Et,15,6,"nb-list-item",32),t.qZA()()()(),t.TgZ(79,"button",33),t._uU(80,"Add Proposal"),t.qZA()()()()()}if(2&a){const e=t.MAs(42),n=t.MAs(48),o=t.oxw();t.xp6(4),t.Oqu(null==o.dialogData?null:o.dialogData.title),t.xp6(16),t.Q6J("ngForOf",o.circuitData),t.xp6(5),t.Q6J("ngForOf",null==o.circuitData[o.selectionCircuit]?null:o.circuitData[o.selectionCircuit].piping),t.xp6(5),t.Q6J("ngForOf",o.choosenPipe),t.xp6(10),t.Q6J("nbDatepicker",e),t.xp6(6),t.Q6J("nbDatepicker",n),t.xp6(15),t.Q6J("ngForOf",t.DdM(11,Ot)),t.xp6(8),t.Q6J("ngForOf",o.inspectionMethod),t.xp6(5),t.Q6J("ngForOf",null==o.inspectionMethod[o.selectionMethod]?null:o.inspectionMethod[o.selectionMethod].children),t.xp6(4),t.Q6J("ngForOf",o.inspectionMethodList),t.xp6(1),t.Q6J("disabled",!o.choosenPipe.length)}}let jt=(()=>{class a{constructor(e,n,o){this.circuitService=e,this.toastr=n,this.dialog=o,this.selectionCircuit=0,this.selectionMethod=0,this.inspectionMethodList=[],this.choosenPipe=[],this.inspectionMethod=[{name:"Acoustic Emission",children:[{name:"Crack Detection"},{name:"Leak Detection"}]},{name:"Eddy Current",children:[{name:"ACFM"},{name:"Low Frequency"},{name:"Pulsed"},{name:"Remote Field"},{name:"Standard (flat coil)"}]},{name:"Magnetic",children:[{name:"Magnetic Fluorescent Inspection"},{name:"Magnetic Flux Leakage"},{name:"Magnetic Particle Inspection"}]},{name:"Metallurgical",children:[{name:"Hardness Surveys"},{name:"Microstructure Replication"}]},{name:"Monitoring",children:[{name:"On-line Monitoring"}]},{name:"Penetrant",children:[{name:"Liquid Penetrant Inspection"},{name:"Penetrant Leak Inspection"}]},{name:"Radiography",children:[{name:"Compton Scatter"},{name:"Gamma Radiography"},{name:"Real-time Radiography"},{name:"X-Radiography"}]},{name:"Thermography",children:[{name:"Passive Thermography"},{name:"Transient Thermography"}]},{name:"Ultrasonic",children:[{name:"Advanced Ultrasonic Backscatter Technique"},{name:"Angled Compression Wave"},{name:"Angled Shear Wave"},{name:"A-scan Thickness Survey"},{name:"B-Scan"},{name:"Chime"},{name:"C-Scan"},{name:"Digital Ultrasonic Thickness Gauge"},{name:"Internal Rotational Inspection System"},{name:"Lorus"},{name:"Surface Waves"},{name:"Teletest"},{name:"TOFD"}]},{name:"Visual",children:[{name:"Endoscopy"},{name:"Holiday Test"},{name:"Hydrotesting"},{name:"Naked Eye"},{name:"Video"}]}]}ngOnInit(){this.circuitService.getPipingCircuits().subscribe(({data:e})=>{this.circuitData=e})}selectCircuit(e){this.selectionPipe=null,this.selectionCircuit=e}selectPipe(e,n){this.selectionPipe=e,this.choosenPipe.includes(n)||this.choosenPipe.push(n)}selectMethod(e){if(!this.inspectionMethodList.length)return this.toastr.danger("Please input inspection type first.","Selection denied.");this.selectionTechnique=null,this.selectionMethod=e,this.inspectionMethodList[this.activeMethod].method=this.inspectionMethod[this.selectionMethod].name}selectTechnique(e,n){if(!this.inspectionMethodList.length)return this.toastr.danger("Please input inspection type first.","Selection denied.");this.selectionTechnique=e,this.inspectionMethodList[this.activeMethod].method=this.inspectionMethod[this.selectionMethod].name,this.inspectionMethodList[this.activeMethod].technique=n}selectInspectionType(e){this.inspectionMethodList=this.inspectionMethodList.map(n=>Object.assign(Object.assign({},n),{active:!1})),this.inspectionMethodList.push({type:e,active:!0}),this.activeMethod=this.inspectionMethodList.length-1}activationMethod(e){this.inspectionMethodList=this.inspectionMethodList.map(n=>Object.assign(Object.assign({},n),{active:!1})),this.inspectionMethodList[e].active=!0,this.activeMethod=e}deleteMethod(e){console.log(e),this.inspectionMethodList[e]=null,this.inspectionMethodList=this.inspectionMethodList.filter(n=>null!=n),e==this.inspectionMethodList.length&&this.activationMethod(e-1),console.log(this.inspectionMethodList)}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{list_of_piping_id:this.choosenPipe.map(n=>n.id),inspection_method:this.inspectionMethodList}),this.dialog.close(e))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Tt.t),t.Y36(m.quB),t.Y36(m.X4l))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-add-proposal"]],inputs:{dialogData:"dialogData"},decls:1,vars:1,consts:[["class","w-100 d-flex justify-content-center mt-5",4,"ngIf"],[1,"w-100","d-flex","justify-content-center","mt-5"],[1,"mt-5",2,"max-height","35rem","min-width","90rem"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["proposalForm","ngForm"],[2,"max-height","15rem"],[1,"text-secondary"],["style","max-height: .7rem;",4,"ngFor","ngForOf"],[1,"w-100","ms-4"],[1,"d-flex","justify-content-evenly"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","proposal_id","ngModel",""],["fullWidth","","nbInput","","fieldSize","small","name","inspection_planned_date","ngModel","",3,"nbDatepicker"],["inspection_planned_date",""],["fullWidth","","nbInput","","fieldSize","small","name","recomendation_date","ngModel","",3,"nbDatepicker"],["recomendation_date",""],["for","remarks",1,"d-block"],["nbInput","","ngModel","","name","remarks","id","remarks","rows","2","fullWidth",""],[1,"mt-5"],[1,"row"],[1,"col-12"],[1,"my-2"],[3,"value","click",4,"ngFor","ngForOf"],[1,"col-6","p-1"],[1,"w-50"],["style","max-height: .7rem; cursor: pointer;",4,"ngFor","ngForOf"],[2,"max-height","24rem"],["style","cursor: pointer;","class","w-100",4,"ngFor","ngForOf"],["nbButton","","status","success","size","small",1,"w-100",3,"disabled"],[2,"max-height",".7rem"],[2,"cursor","pointer",3,"ngStyle","mouseover","mouseout","click"],["circuitcell",""],["pipingcell",""],[3,"value","click"],[2,"max-height",".7rem","cursor","pointer"],["methodcell",""],["techniquecell",""],[1,"w-100",2,"cursor","pointer"],[1,"d-flex","justify-content-between","w-100","row"],[1,"col-1",3,"click"],[1,"d-flex","align-items-center"],[1,"align-self-center","ms-2",2,"font-size","20px",3,"icon","status"],[1,"col-2"],["class","col-2",4,"ngIf"],["type","number","nbInput","","min","0","max","100","fieldSize","tiny",1,"col-2"],[1,"col-1","d-flex","justify-content-center","align-items-center"],["icon","trash-2-outline"]],template:function(e,n){1&e&&t.YNc(0,G,81,12,"div",0),2&e&&t.Q6J("ngIf",n.circuitData)},directives:[_.O5,m.Asz,m.ndF,m.DPz,m.fMN,m.yKW,f._Y,f.JL,f.F,m.zP_,_.sg,m.qBV,_.PC,m.h8i,f.Fj,f.JJ,f.On,m.$kf,m.B4C,O.KE,O.hX,lt.gD,$.ey],encapsulation:2}),a})(),Nt=(()=>{class a{constructor(e){this.httpClient=e,this.apiUrl=Z.N.apiUrl}getProposals(){return this.httpClient.get(this.apiUrl+"/proposal")}addProposals(e){return this.httpClient.post(this.apiUrl+"/proposal",e)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(j.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Jt(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const u=t.CHM(e).$implicit,g=t.oxw();return"New"==u.name?g.addProposal():"Print"==u.name?g.printProposal():null}),t._UZ(1,"nb-icon",3),t.TgZ(2,"span"),t._uU(3),t.qZA()()}if(2&a){const e=p.$implicit,n=t.oxw();let o;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(1),t.Q6J("icon",e.icon)("pack",null!==(o=e.pack)&&void 0!==o?o:"eva"),t.xp6(2),t.Oqu(e.name)}}const ut=function(){return{name:"New",icon:"plus-outline"}},pt=function(){return{name:"Print",icon:"printer-outline"}},Lt=function(a,p){return[a,p]},mt=function(){return{title:"Proposal"}},Rt=[{path:"",component:k,children:[{path:"piping-assets",component:Ct,data:{routename:"assets"}},{path:"piping-circuits",component:rt,data:{routename:"circuit"}},{path:"view-proposal",component:(()=>{class a{constructor(e,n,o,u){this.proposalService=e,this.dialogService=n,this.datePipe=o,this.toastrService=u,this.tableData=[],this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"proposal_id",head:"Proposal ID",width:"100px"},{type:"text",prop:"inspection_planned_date",head:"Inspection Plan Date",width:"200px"},{type:"text",prop:"piping_circuit",head:"Piping Circuit",width:"200px"},{type:"text",prop:"remarks",head:"Remarks",width:"200px"}]}ngOnInit(){this.proposalService.getProposals().subscribe(({data:e})=>{this.tableData=e,this.viewTable.regenerateTable(e)})}printProposal(){console.log("print")}addProposal(){this.dialogService.open(jt,{context:{dialogData:{title:"Add Proposal"}}}).onClose.subscribe(e=>{if(!e)return;const{inspection_planned_date:n,recomendation_date:o}=e;e=Object.assign(Object.assign({},e),{inspection_planned_date:this.datePipe.transform(n,"yyyy-MM-dd"),recomendation_date:this.datePipe.transform(o,"yyyy-MM-dd")}),console.log(e),this.proposalService.addProposals(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Nt),t.Y36(m.Gln),t.Y36(_.uU),t.Y36(m.quB))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ngx-view-proposal"]],viewQuery:function(e,n){if(1&e&&t.Gf(I.V,5),2&e){let o;t.iGM(o=t.CRH())&&(n.viewTable=o.first)}},decls:4,vars:10,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,Jt,4,4,"button",0),t.qZA()(),t._UZ(3,"ngx-mat-table",1)),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.WLB(6,Lt,t.DdM(4,ut),t.DdM(5,pt))),t.xp6(1),t.Q6J("tableHeader",t.DdM(9,mt))("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[m.Asz,m.yKW,_.sg,m.DPz,m.fMN,I.V],encapsulation:2}),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),data:{routename:"proposal"}}]}];let Yt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[w.Bz.forChild(Rt)],w.Bz]}),a})();var qt=d(2356),Qt=d(9511),zt=d(2368),Bt=d(8279),Ht=d(7446),Wt=d(5331),Vt=d(7531),B=d(8246);let X=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.ez,S.O,m.j7H.forChild({closeOnBackdropClick:!0}),m.zyh,m.KdK,m.T2N]]}),a})(),Kt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.ez,S.O,m.j5J,m.zyh,m.x4g,m.IIj,m.oGl,m.nKr,m.OA,m.T2N,m.KdK,m.COg,m.KdK,m.LW9.forRoot({destroyByClick:!0,duration:3e3,position:m.fe3.BOTTOM_RIGHT,preventDuplicates:!0,limit:3}),B.F5,f.u5,Yt,qt.Z,Qt.H,zt.rP,Bt.p0,Ht.p9,Wt.TU,O.lN,Vt.c,lt.LD,X]]}),a})()},2787:(L,P,d)=>{"use strict";d.d(P,{t:()=>w});var _=d(2340),S=d(5e3),m=d(520);let w=(()=>{class t{constructor(C){this.httpClient=C,this.apiUrl=_.N.apiUrl}getPipingCircuits(){return this.httpClient.get(this.apiUrl+"/circuit")}addPipingCircuits(C){return this.httpClient.post(this.apiUrl+"/circuit",C)}updatePipingCircuits(C){return this.httpClient.put(this.apiUrl+"/circuit/"+C.id,C)}deletePipingCircuits(C){return this.httpClient.delete(this.apiUrl+"/circuit/"+C)}}return t.\u0275fac=function(C){return new(C||t)(S.LFG(m.eN))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9441:function(L,P){var S;void 0!==(S=function(){"use strict";function w(x,f,U){var y=new XMLHttpRequest;y.open("GET",x),y.responseType="blob",y.onload=function(){j(y.response,f,U)},y.onerror=function(){console.error("could not download file")},y.send()}function t(x){var f=new XMLHttpRequest;f.open("HEAD",x,!1);try{f.send()}catch(U){}return 200<=f.status&&299>=f.status}function k(x){try{x.dispatchEvent(new MouseEvent("click"))}catch(U){var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),x.dispatchEvent(f)}}var C="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Z=C.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=C.saveAs||("object"!=typeof window||window!==C?function(){}:"download"in HTMLAnchorElement.prototype&&!Z?function(x,f,U){var y=C.URL||C.webkitURL,M=document.createElement("a");M.download=f=f||x.name||"download",M.rel="noopener","string"==typeof x?(M.href=x,M.origin===location.origin?k(M):t(M.href)?w(x,f,U):k(M,M.target="_blank")):(M.href=y.createObjectURL(x),setTimeout(function(){y.revokeObjectURL(M.href)},4e4),setTimeout(function(){k(M)},0))}:"msSaveOrOpenBlob"in navigator?function(x,f,U){if(f=f||x.name||"download","string"!=typeof x)navigator.msSaveOrOpenBlob(function m(x,f){return void 0===f?f={autoBom:!1}:"object"!=typeof f&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\ufeff",x],{type:x.type}):x}(x,U),f);else if(t(x))w(x,f,U);else{var y=document.createElement("a");y.href=x,y.target="_blank",setTimeout(function(){k(y)})}}:function(x,f,U,y){if((y=y||open("","_blank"))&&(y.document.title=y.document.body.innerText="downloading..."),"string"==typeof x)return w(x,f,U);var M="application/octet-stream"===x.type,Q=/constructor/i.test(C.HTMLElement)||C.safari,Y=/CriOS\/[\d]+/.test(navigator.userAgent);if((Y||M&&Q||Z)&&"undefined"!=typeof FileReader){var N=new FileReader;N.onloadend=function(){var J=N.result;J=Y?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=J:location=J,y=null},N.readAsDataURL(x)}else{var I=C.URL||C.webkitURL,F=I.createObjectURL(x);y?y.location=F:location.href=F,y=null,setTimeout(function(){I.revokeObjectURL(F)},4e4)}});C.saveAs=j.saveAs=j,L.exports=j}.apply(P,[]))&&(L.exports=S)},2231:(L,P,d)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});var _=d(2403);_.Observable.forkJoin=_.forkJoin},2403:(L,P,d)=>{"use strict";d.r(P),d.d(P,{ArgumentOutOfRangeError:()=>_t.W,AsyncSubject:()=>M.c,BehaviorSubject:()=>U.X,ConnectableObservable:()=>S.c,EMPTY:()=>O.E,EmptyError:()=>vt.K,GroupedObservable:()=>Z,NEVER:()=>dt,Notification:()=>H.P,NotificationKind:()=>H.W,ObjectUnsubscribedError:()=>xt.N,Observable:()=>_.y,ReplaySubject:()=>y.t,Scheduler:()=>ht.b,Subject:()=>f.xQ,Subscriber:()=>gt.L,Subscription:()=>m.w,TimeoutError:()=>Ct,UnsubscriptionError:()=>yt.B,VirtualAction:()=>E,VirtualTimeScheduler:()=>tt,animationFrame:()=>I.r,animationFrameScheduler:()=>I.Z,asap:()=>Q.e,asapScheduler:()=>Q.E,async:()=>Y.P,asyncScheduler:()=>Y.z,bindCallback:()=>it,bindNodeCallback:()=>ot,combineLatest:()=>Zt.aj,concat:()=>Pt.z,config:()=>g.v,defer:()=>rt.P,empty:()=>O.c,forkJoin:()=>lt.D,from:()=>$.D,fromEvent:()=>z.R,fromEventPattern:()=>ct,generate:()=>Ut,identity:()=>W.y,iif:()=>It,interval:()=>kt.F,isObservable:()=>bt.b,merge:()=>Ft.T,never:()=>Et,noop:()=>et.Z,observable:()=>x.L,of:()=>Ot.of,onErrorResumeNext:()=>G,pairs:()=>jt,partition:()=>Lt,pipe:()=>ft.z,queue:()=>N.c,queueScheduler:()=>N.N,race:()=>Yt,range:()=>zt,scheduled:()=>u.x,throwError:()=>Ht._,timer:()=>Wt.H,using:()=>Vt,zip:()=>Kt});var _=d(4202),S=d(1762),m=d(4096);class Z extends _.y{constructor(i,s,l){super(),this.key=i,this.groupSubject=s,this.refCountSubscription=l}_subscribe(i){const s=new m.w,{refCountSubscription:l,groupSubject:c}=this;return l&&!l.closed&&s.add(new j(l)),s.add(c.subscribe(i)),s}}class j extends m.w{constructor(i){super(),this.parent=i,i.count++}unsubscribe(){const i=this.parent;!i.closed&&!this.closed&&(super.unsubscribe(),i.count-=1,0===i.count&&i.attemptedToUnsubscribe&&i.unsubscribe())}}var x=d(3821),f=d(8929),U=d(591),y=d(2247),M=d(2185),Q=d(8139),Y=d(353),N=d(341),I=d(352),F=d(6686),J=d(198);let tt=(()=>{class r extends J.v{constructor(s=E,l=Number.POSITIVE_INFINITY){super(s,()=>this.frame),this.maxFrames=l,this.frame=0,this.index=-1}flush(){const{actions:s,maxFrames:l}=this;let c,h;for(;(h=s[0])&&h.delay<=l&&(s.shift(),this.frame=h.delay,!(c=h.execute(h.state,h.delay))););if(c){for(;h=s.shift();)h.unsubscribe();throw c}}}return r.frameTimeFactor=10,r})();class E extends F.o{constructor(i,s,l=(i.index+=1)){super(i,s),this.scheduler=i,this.work=s,this.index=l,this.active=!0,this.index=i.index=l}schedule(i,s=0){if(!this.id)return super.schedule(i,s);this.active=!1;const l=new E(this.scheduler,this.work);return this.add(l),l.schedule(i,s)}requestAsyncId(i,s,l=0){this.delay=i.frame+l;const{actions:c}=i;return c.push(this),c.sort(E.sortActions),!0}recycleAsyncId(i,s,l=0){}_execute(i,s){if(!0===this.active)return super._execute(i,s)}static sortActions(i,s){return i.delay===s.delay?i.index===s.index?0:i.index>s.index?1:-1:i.delay>s.delay?1:-1}}var ht=d(2221),gt=d(3489),H=d(9312),ft=d(4843),et=d(7876),W=d(5379),bt=d(4715),_t=d(4231),vt=d(4450),xt=d(5279),yt=d(7964);const Ct=(()=>{function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r})();var V=d(4850),nt=d(9476),R=d(6688),K=d(2866);function it(r,i,s){if(i){if(!(0,K.K)(i))return(...l)=>it(r,s)(...l).pipe((0,V.U)(c=>(0,R.k)(c)?i(...c):i(c)));s=i}return function(...l){const c=this;let h;const v={context:c,subject:h,callbackFunc:r,scheduler:s};return new _.y(b=>{if(s)return s.schedule(At,0,{args:l,subscriber:b,params:v});if(!h){h=new M.c;const T=(...A)=>{h.next(A.length<=1?A[0]:A),h.complete()};try{r.apply(c,[...l,T])}catch(A){(0,nt._)(h)?h.error(A):console.warn(A)}}return h.subscribe(b)})}}function At(r){const{args:s,subscriber:l,params:c}=r,{callbackFunc:h,context:v,scheduler:b}=c;let{subject:T}=c;if(!T){T=c.subject=new M.c;const A=(...D)=>{this.add(b.schedule(st,0,{value:D.length<=1?D[0]:D,subject:T}))};try{h.apply(v,[...s,A])}catch(D){T.error(D)}}this.add(T.subscribe(l))}function st(r){const{value:i,subject:s}=r;s.next(i),s.complete()}function ot(r,i,s){if(i){if(!(0,K.K)(i))return(...l)=>ot(r,s)(...l).pipe((0,V.U)(c=>(0,R.k)(c)?i(...c):i(c)));s=i}return function(...l){const c={subject:void 0,args:l,callbackFunc:r,scheduler:s,context:this};return new _.y(h=>{const{context:v}=c;let{subject:b}=c;if(s)return s.schedule(Mt,0,{params:c,subscriber:h,context:v});if(!b){b=c.subject=new M.c;const T=(...A)=>{const D=A.shift();D?b.error(D):(b.next(A.length<=1?A[0]:A),b.complete())};try{r.apply(v,[...l,T])}catch(A){(0,nt._)(b)?b.error(A):console.warn(A)}}return b.subscribe(h)})}}function Mt(r){const{params:i,subscriber:s,context:l}=r,{callbackFunc:c,args:h,scheduler:v}=i;let b=i.subject;if(!b){b=i.subject=new M.c;const T=(...A)=>{const D=A.shift();this.add(D?v.schedule(at,0,{err:D,subject:b}):v.schedule(Dt,0,{value:A.length<=1?A[0]:A,subject:b}))};try{c.apply(l,[...h,T])}catch(A){this.add(v.schedule(at,0,{err:A,subject:b}))}}this.add(b.subscribe(s))}function Dt(r){const{value:i,subject:s}=r;s.next(i),s.complete()}function at(r){const{err:i,subject:s}=r;s.error(i)}var Zt=d(6053),Pt=d(1221),rt=d(8514),O=d(8896),lt=d(567),$=d(3527),z=d(3753),St=d(7043);function ct(r,i,s){return s?ct(r,i).pipe((0,V.U)(l=>(0,R.k)(l)?s(...l):s(l))):new _.y(l=>{const c=(...v)=>l.next(1===v.length?v[0]:v);let h;try{h=r(c)}catch(v){return void l.error(v)}if((0,St.m)(i))return()=>i(c,h)})}function Ut(r,i,s,l,c){let h,v;return 1==arguments.length?(v=r.initialState,i=r.condition,s=r.iterate,h=r.resultSelector||W.y,c=r.scheduler):void 0===l||(0,K.K)(l)?(v=r,h=W.y,c=l):(v=r,h=l),new _.y(b=>{let T=v;if(c)return c.schedule(wt,0,{subscriber:b,iterate:s,condition:i,resultSelector:h,state:T});for(;;){if(i){let D;try{D=i(T)}catch(q){return void b.error(q)}if(!D){b.complete();break}}let A;try{A=h(T)}catch(D){return void b.error(D)}if(b.next(A),b.closed)break;try{T=s(T)}catch(D){return void b.error(D)}}})}function wt(r){const{subscriber:i,condition:s}=r;if(i.closed)return;if(r.needIterate)try{r.state=r.iterate(r.state)}catch(c){return void i.error(c)}else r.needIterate=!0;if(s){let c;try{c=s(r.state)}catch(h){return void i.error(h)}if(!c)return void i.complete();if(i.closed)return}let l;try{l=r.resultSelector(r.state)}catch(c){return void i.error(c)}return i.closed||(i.next(l),i.closed)?void 0:this.schedule(r)}function It(r,i=O.E,s=O.E){return(0,rt.P)(()=>r()?i:s)}var kt=d(1715),Ft=d(6787);const dt=new _.y(et.Z);function Et(){return dt}var Ot=d(1086);function G(...r){if(0===r.length)return O.E;const[i,...s]=r;return 1===r.length&&(0,R.k)(i)?G(...i):new _.y(l=>{const c=()=>l.add(G(...s).subscribe(l));return(0,$.D)(i).subscribe({next(h){l.next(h)},error:c,complete:c})})}function jt(r,i){return new _.y(i?s=>{const l=Object.keys(r),c=new m.w;return c.add(i.schedule(Nt,0,{keys:l,index:0,subscriber:s,subscription:c,obj:r})),c}:s=>{const l=Object.keys(r);for(let c=0;c<l.length&&!s.closed;c++){const h=l[c];r.hasOwnProperty(h)&&s.next([h,r[h]])}s.complete()})}function Nt(r){const{keys:i,index:s,subscriber:l,subscription:c,obj:h}=r;if(!l.closed)if(s<i.length){const v=i[s];l.next([v,h[v]]),c.add(this.schedule({keys:i,index:s+1,subscriber:l,subscription:c,obj:h}))}else l.complete()}function Jt(r,i){function s(){return!s.pred.apply(s.thisArg,arguments)}return s.pred=r,s.thisArg=i,s}var ut=d(9249),pt=d(2198);function Lt(r,i,s){return[(0,pt.h)(i,s)(new _.y((0,ut.s)(r))),(0,pt.h)(Jt(i,s))(new _.y((0,ut.s)(r)))]}var mt=d(3009),Xt=d(826),Rt=d(448);function Yt(...r){if(1===r.length){if(!(0,R.k)(r[0]))return r[0];r=r[0]}return(0,mt.n)(r,void 0).lift(new qt)}class qt{call(i,s){return s.subscribe(new Qt(i))}}class Qt extends Xt.L{constructor(i){super(i),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(i){this.observables.push(i)}_complete(){const i=this.observables,s=i.length;if(0===s)this.destination.complete();else{for(let l=0;l<s&&!this.hasFirst;l++){const h=(0,Rt.D)(this,i[l],void 0,l);this.subscriptions&&this.subscriptions.push(h),this.add(h)}this.observables=null}}notifyNext(i,s,l){if(!this.hasFirst){this.hasFirst=!0;for(let c=0;c<this.subscriptions.length;c++)if(c!==l){let h=this.subscriptions[c];h.unsubscribe(),this.remove(h)}this.subscriptions=null}this.destination.next(s)}}function zt(r=0,i,s){return new _.y(l=>{void 0===i&&(i=r,r=0);let c=0,h=r;if(s)return s.schedule(Bt,0,{index:c,count:i,start:r,subscriber:l});for(;;){if(c++>=i){l.complete();break}if(l.next(h++),l.closed)break}})}function Bt(r){const{start:i,index:s,count:l,subscriber:c}=r;s>=l?c.complete():(c.next(i),!c.closed&&(r.index=s+1,r.start=i+1,this.schedule(r)))}var Ht=d(1737),Wt=d(8723);function Vt(r,i){return new _.y(s=>{let l,c;try{l=r()}catch(b){return void s.error(b)}try{c=i(l)}catch(b){return void s.error(b)}const v=(c?(0,$.D)(c):O.E).subscribe(s);return()=>{v.unsubscribe(),l&&l.unsubscribe()}})}var B=d(5430),X=d(1177);function Kt(...r){const i=r[r.length-1];return"function"==typeof i&&r.pop(),(0,mt.n)(r,void 0).lift(new a(i))}class a{constructor(i){this.resultSelector=i}call(i,s){return s.subscribe(new p(i,this.resultSelector))}}class p extends gt.L{constructor(i,s,l=Object.create(null)){super(i),this.resultSelector=s,this.iterators=[],this.active=0,this.resultSelector="function"==typeof s?s:void 0}_next(i){const s=this.iterators;(0,R.k)(i)?s.push(new n(i)):s.push("function"==typeof i[B.hZ]?new e(i[B.hZ]()):new o(this.destination,this,i))}_complete(){const i=this.iterators,s=i.length;if(this.unsubscribe(),0!==s){this.active=s;for(let l=0;l<s;l++){let c=i[l];c.stillUnsubscribed?this.destination.add(c.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const i=this.iterators,s=i.length,l=this.destination;for(let v=0;v<s;v++){let b=i[v];if("function"==typeof b.hasValue&&!b.hasValue())return}let c=!1;const h=[];for(let v=0;v<s;v++){let b=i[v],T=b.next();if(b.hasCompleted()&&(c=!0),T.done)return void l.complete();h.push(T.value)}this.resultSelector?this._tryresultSelector(h):l.next(h),c&&l.complete()}_tryresultSelector(i){let s;try{s=this.resultSelector.apply(this,i)}catch(l){return void this.destination.error(l)}this.destination.next(s)}}class e{constructor(i){this.iterator=i,this.nextResult=i.next()}hasValue(){return!0}next(){const i=this.nextResult;return this.nextResult=this.iterator.next(),i}hasCompleted(){const i=this.nextResult;return Boolean(i&&i.done)}}class n{constructor(i){this.array=i,this.index=0,this.length=0,this.length=i.length}[B.hZ](){return this}next(i){const s=this.index++;return s<this.length?{value:this.array[s],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class o extends X.Ds{constructor(i,s,l){super(i),this.parent=s,this.observable=l,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[B.hZ](){return this}next(){const i=this.buffer;return 0===i.length&&this.isComplete?{value:null,done:!0}:{value:i.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(i){this.buffer.push(i),this.parent.checkIterators()}subscribe(){return(0,X.ft)(this.observable,new X.IY(this))}}var u=d(3998),g=d(2830)},2185:(L,P,d)=>{"use strict";d.d(P,{c:()=>m});var _=d(8929),S=d(4096);class m extends _.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),S.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),S.w.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},7456:(L,P,d)=>{"use strict";d(2231)}}]);