(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[20],{5020:(O,C,c)=>{"use strict";c.r(C),c.d(C,{DashboardModule:()=>r});var g=c(9808),T=c(4738),p=c(3254),M=c(2497),t=c(5e3);let w=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-dashboard"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},directives:[M.lC],encapsulation:2}),i})();var _=c(3872),y=c(2340),A=c(520);let f=(()=>{class i{constructor(e){this.httpClient=e,this.apiUrl=y.N.apiUrl}addImage(e){return this.httpClient.post(this.apiUrl+"/image",e)}showImage(e){return this.httpClient.get(this.apiUrl+"/image/"+e)}addDocument(e){return this.httpClient.post(this.apiUrl+"/document",e,{reportProgress:!0,observe:"events"})}showDocument(e){return this.httpClient.get(this.apiUrl+"/document/"+e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var m=c(3075);function D(i,o){if(1&i&&(t.TgZ(0,"div",41)(1,"label",42),t._uU(2),t.qZA(),t._UZ(3,"input",43),t.TgZ(4,"span",44),t._uU(5),t.qZA()()),2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("for",e.id),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("id",e.id)("name",e.id)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data[e.id]),t.xp6(2),t.hij(" ",null==e?null:e.unit," ")}}function b(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",46)(2,"img",47),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(22).click()}),t.qZA()()()}if(2&i){const e=o.$implicit;t.Q6J("ngClass",0==o.index?"active":""),t.xp6(2),t.Q6J("src",e.src,t.LSH)("alt",null==e?null:e.alt)}}function x(i,o){if(1&i&&(t.TgZ(0,"nb-option",48),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const q=function(i){return{display:i}},J=function(){return[1,2,3,4]};let k=(()=>{class i{constructor(e,n,s){this.dialog=e,this.pageMenuService=n,this.toastr=s,this.spesificationItem=[{id:"piping_id",name:"Piping Id"},{id:"piping_name",name:"Piping Name",unbit:"mm"},{id:"nominal_pipe_size",name:"Nominal Pipe Size"},{id:"pipe_design_code",name:"Pipe Design Code"},{id:"schedule",name:"Schedule"},{id:"outside_diameter",name:"Outside Diameter",unit:"mm"},{id:"longtd_quality_factor",name:"Longtd. Quality Factor (E)"},{id:"weld_joint_factor",name:"Weld Joint Factor (W)"},{id:"allowable_unit_stress",name:"Allowable Unit Stress (S)",unit:"psi"},{id:"coefficient",name:"Coefficient (Y)"},{id:"min_design_pressure",name:"Min. Design Pressure (P min)",unit:"psig"},{id:"max_design_pressure",name:"Max. Design Pressure (P max)",unit:"psig"},{id:"min_design_temperature",name:"Min. Design Temperature (T min)",unit:"F"},{id:"max_design_temperature",name:"Max Design Temperature (T max)",unit:"F"},{id:"corrosion_allowance",name:"Corrosion Allowance",unit:"mm"},{id:"mechanical_allowance",name:"Mechanical Allowances",unit:"mm"},{id:"min_structural_thickness",name:"Min. Structural Thickness",unit:"mm"},{id:"min_alert_thickness",name:"Min. Alert Thickness",unit:"mm"},{id:"nominal_thickness",name:"Nominal Thickness",unit:"mm"}],this.imageLink=[],this.loading=null}ngOnInit(){var e,n;const s=null===(n=null===(e=this.dialogData)||void 0===e?void 0:e.data)||void 0===n?void 0:n.images;s&&(this.imageLink=null==s?void 0:s.map(l=>({src:y.N.apiUrl+"/image/"+l,alt:"Piping Assets"})))}parseToInt(e){return parseInt(e)}onFileChange(e){const n=e.target.files;this.uploadImageFile=n;for(let l of n){var s=new FileReader;s.readAsDataURL(l),s.onload=d=>{this.imageLink.push({src:d.target.result,alt:l.name})}}}onUploadAttachment(e){const n=e.target.files[0],s=new FormData;s.append("document",n),this.pageMenuService.addDocument(s).subscribe(l=>{if(l.type===A.dt.UploadProgress)this.loading=100*Math.round(l.loaded/l.total);else if(l.type===A.dt.Response){const d=l,{id:h}=d.body.data;this.attachment=h,this.loading=null,this.toastr.success("Your File has been uploaded.","Success upload file.")}})}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{image:this.uploadImageFile,attachment:this.attachment}),console.log(this.attachment),this.dialog.close(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.X4l),t.Y36(f),t.Y36(p.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-add-assets"]],inputs:{dialogData:"dialogData"},decls:58,vars:18,consts:[[1,"w-100","d-flex","justify-content-center","mt-5"],["nbSpinnerStatus","success",1,"mt-5",2,"max-height","35rem","min-width","90rem",3,"nbSpinner","nbSpinnerMessage"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["addAssetsForm","ngForm"],[1,"row"],[1,"col-8"],[1,"row","row-cols-3"],["class","col mb-2",4,"ngFor","ngForOf"],[1,"col-4"],["id","carouselExampleInterval","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item","data-bs-interval","10000",3,"ngClass",4,"ngFor","ngForOf"],["for","addImage"],["placeholder","Add image","multiple","","fullWidth","","nbInput","","type","file","accept","image/png, image/gif, image/jpeg","id","addImage",2,"display","none",3,"ngStyle","change"],["addImage",""],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"row","row-cols-2"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","date_in_service","required","",3,"nbDatepicker","ngModel"],["datepicker",""],["for","class",1,"mb-1","d-block"],["placeholder","Class","size","small","status","primary","name","class",1,"",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","notes",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","notes","name","notes",3,"ngModel"],["for","addAttach",1,"d-block","mb-1"],["fullWidth","","fieldSize","tiny","nbInput","","type","file","id","addAttach","accept","application/pdf","id","addAttachment","name","attachment",3,"ngModel","change"],["addAttach",""],["for","recomendation",1,"d-block","mb-1"],["fullWidth","","nbInput","","name","recomendation","id","recomendation","rows","2",3,"ngModel"],[1,"d-flex","justify-content-center"],["nbButton","","status","success","type","submit",1,"m-1","w-100",3,"disabled"],[1,"col","mb-2"],[1,"d-block",2,"font-size",".9rem",3,"for"],["fieldSize","small","required","","nbInput","","type","text",1,"col-8",3,"id","name","ngModel"],[1,"col"],["data-bs-interval","10000",1,"carousel-item",3,"ngClass"],[1,"overflow-hidden","d-flex","align-justify-center",2,"height","13rem"],[1,"w-100",3,"src","alt","click"],[3,"value"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"nb-card",1)(2,"nb-card-header",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.closeDialog()}),t._UZ(7,"nb-icon",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(s);const d=t.MAs(10);return n.closeDialog(d.value)}),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11),t.YNc(14,D,6,6,"div",12),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14)(17,"div",15),t.YNc(18,b,3,3,"div",16),t.TgZ(19,"label",17),t._uU(20,"Image"),t.qZA(),t.TgZ(21,"input",18,19),t.NdJ("change",function(d){return n.onFileChange(d)}),t.qZA()(),t.TgZ(23,"button",20),t._UZ(24,"span",21),t.TgZ(25,"span",22),t._uU(26,"Previous"),t.qZA()(),t.TgZ(27,"button",23),t._UZ(28,"span",24),t.TgZ(29,"span",22),t._uU(30,"Next"),t.qZA()()(),t.TgZ(31,"div",25)(32,"div")(33,"label",26),t._uU(34,"Date In Service"),t.qZA(),t._UZ(35,"input",27)(36,"nb-datepicker",null,28),t.qZA(),t.TgZ(38,"div")(39,"label",29),t._uU(40,"Class"),t.qZA(),t.TgZ(41,"nb-select",30),t.YNc(42,x,2,2,"nb-option",31),t.qZA()(),t.TgZ(43,"div")(44,"label",32),t._uU(45,"Notes"),t.qZA(),t._UZ(46,"input",33),t.qZA(),t.TgZ(47,"div")(48,"label",34),t._uU(49,"Attachment"),t.qZA(),t.TgZ(50,"input",35,36),t.NdJ("change",function(d){return n.onUploadAttachment(d)}),t.qZA()()()()(),t.TgZ(52,"label",37),t._uU(53,"Recomendation"),t.qZA(),t._UZ(54,"textarea",38),t.TgZ(55,"div",39)(56,"button",40),t._uU(57),t.qZA()()()()()()}if(2&e){const s=t.MAs(10),l=t.MAs(37);t.xp6(1),t.Q6J("nbSpinner",n.loading)("nbSpinnerMessage",n.loading),t.xp6(3),t.Oqu(null==n.dialogData?null:n.dialogData.title),t.xp6(10),t.Q6J("ngForOf",n.spesificationItem),t.xp6(4),t.Q6J("ngForOf",n.imageLink),t.xp6(3),t.Q6J("ngStyle",t.VKq(15,q,n.imageLink.length?"none":"block")),t.xp6(14),t.Q6J("nbDatepicker",l)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.date_in_service),t.xp6(6),t.Q6J("ngModel",n.parseToInt(null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.class)),t.xp6(1),t.Q6J("ngForOf",t.DdM(17,J)),t.xp6(4),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.notes),t.xp6(4),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.attachment),t.xp6(4),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.recomendation),t.xp6(2),t.Q6J("disabled",!s.form.valid),t.xp6(1),t.Oqu(null==n.dialogData?null:n.dialogData.title)}},directives:[p.Asz,p.Q7R,p.ndF,p.DPz,p.fMN,p.yKW,m._Y,m.JL,m.F,g.sg,p.h8i,m.Fj,m.Q7,m.JJ,m.On,g.mk,g.PC,p.$kf,p.B4C,p.rs,p.q51],encapsulation:2}),i})();var Z=c(3858),F=c(7625),E=c(8929),X=c(2185),I=c(574),ht=c(9441),tt=(c(7456),c(4641)),Y=c.n(tt),et=c(8493),B=c(7238),gt=c.n(B);const ft=["pdfAssets"];function bt(i,o){if(1&i&&(t.TgZ(0,"th")(1,"b",6),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function _t(i,o){if(1&i&&(t.TgZ(0,"div")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()(),t.TgZ(14,"tr")(15,"td",7)(16,"b"),t._uU(17,"Notes"),t.qZA()(),t.TgZ(18,"td",8),t._uU(19),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(3),t.hij(" ",e.piping_id," "),t.xp6(2),t.hij(" ",e.piping_name," "),t.xp6(2),t.hij(" ",e.date_in_service," "),t.xp6(2),t.hij(" ",e.class," "),t.xp6(2),t.hij(" ",e.tm_inspection_interval," "),t.xp6(2),t.hij(" ",e.ve_inspection_interval," "),t.xp6(6),t.hij(" ",e.notes," ")}}const vt=function(){return{"font-size":"10px"}};Y().vfs=et.I.vfs;let xt=(()=>{class i{constructor(){this.assetsHead=[{name:"Id"},{name:"Name"},{name:"Date In Service"},{name:"Class"},{name:"TM"},{name:"VE"}]}generateData(e){this.tableData=e,setTimeout(()=>{this.downloadAsPDF()},500)}downloadAsPDF(){Y().tableLayouts={exampleLayout:{hLineWidth:function(l,d){return 0===l||l===d.table.body.length?0:l===d.table.headerRows?2:1},vLineWidth:function(l){return 0},hLineColor:function(l){return 1===l?"black":"#aaa"},paddingLeft:function(l){return 0===l?0:8},paddingRight:function(l,d){return l===d.table.widths.length-1?0:8}}};const e=this.pdfAssets.nativeElement,s={content:[gt()(e.innerHTML),{pageBreak:"before",text:"Attachment\n",style:{bold:!0,fontSize:16,color:"#5588EE"},pageOrientation:"landscape"}],pageBreakBefore:function(l){return l.style&&l.style.indexOf("pdf-pagebreak-before")>-1}};Y().createPdf(s).open()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["pdf-assets-dashboard"]],viewQuery:function(e,n){if(1&e&&t.Gf(ft,5),2&e){let s;t.iGM(s=t.CRH())&&(n.pdfAssets=s.first)}},decls:9,vars:5,consts:[[1,"container",2,"display","none"],["id","pdfTable"],["pdfAssets",""],[2,"width","100%","margin","0 0 1rem 0","color","#5588EE"],["data-pdfmake","{'widths':[ '*', '*', '*', 20, '*', '*' ], 'layout' : 'exampleLayout'}"],[4,"ngFor","ngForOf"],[2,"font-weight","bold"],["colspan","2"],["colspan","4"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1,2)(3,"h5",3),t._uU(4," Piping Assets "),t.qZA(),t.TgZ(5,"table",4)(6,"tr"),t.YNc(7,bt,3,1,"th",5),t.qZA(),t.YNc(8,_t,20,7,"div",5),t.qZA()()()),2&e&&(t.xp6(5),t.Akn(t.DdM(4,vt)),t.xp6(2),t.Q6J("ngForOf",n.assetsHead),t.xp6(1),t.Q6J("ngForOf",n.tableData))},directives:[g.sg],encapsulation:2}),i})(),nt=(()=>{class i{constructor(e){this.httpClient=e,this.apiUrl=y.N.apiUrl}getPipingAssets(){const e=this.apiUrl+"/assets",n=new A.WM;return n.append("enctype","multipart/form-data"),n.append("Accept","*/*"),this.httpClient.get(e)}addPipingAssets(e){return this.httpClient.post(this.apiUrl+"/assets",e)}updatePipingAssets(e){return this.httpClient.put(this.apiUrl+"/assets/"+e.id,e)}deletePipingAssets(e){return this.httpClient.delete(this.apiUrl+"/assets/"+e)}uploadImage(e){return this.httpClient.post(this.apiUrl+"/file/upload",e,{reportProgress:!0,observe:"events"})}importAsset(e){return this.httpClient.post(this.apiUrl+"/import_assets",e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var z=c(7024);function it(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.MAs(2),h=t.oxw();return"New"==l.name?h.addAssets():"Import"==l.name?d.click():"Export"==l.name?h.exportExcelFile():"Print"==l.name?h.pdfAssets.generateData(h.tableData):null}),t.TgZ(1,"input",3,4),t.NdJ("change",function(s){return t.CHM(e),t.oxw().importExcelFile(s)}),t.qZA(),t._UZ(3,"nb-icon",5),t.TgZ(4,"span"),t._uU(5),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();let s;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(3),t.Q6J("icon",e.icon)("pack",null!==(s=e.pack)&&void 0!==s?s:"eva"),t.xp6(2),t.Oqu(e.name)}}const j=function(){return{name:"New",icon:"plus-outline"}},H=function(){return{name:"Import",icon:"download-outline"}},st=function(){return{name:"Export",icon:"upload-outline"}},yt=function(){return{name:"Print",icon:"printer-outline"}},At=function(i,o,e,n){return[i,o,e,n]};let Ct=(()=>{class i{constructor(e,n,s,l,d,h){this.assetsService=e,this.dialogService=n,this.toastrService=s,this.pageMenuService=l,this.datePipe=d,this.variables=h,this.destroy$=new E.xQ,this.tableHeader={title:"Piping Assets",filter:[{name:"Class",value:["All",1,2,3,4],title:"class-assets"}]},this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"piping_id",head:"Piping Id",width:"100px"},{type:"text",prop:"piping_name",head:"Piping Name",width:"200px"},{type:"text",prop:"date_in_service",head:"Date In Service",width:"200px"},{type:"text",prop:"class",head:"Class",width:"200px"},{type:"text",prop:"tm_inspection_interval",head:"TM Inspection Interval",width:"200px"},{type:"text",prop:"ve_inspection_interval",head:"VE Inspection Interval",width:"200px"},{type:"text",prop:"notes",head:"Notes",width:"200px"},{type:"button",prop:"edit",width:"80px",button:[{icon:"edit-outline",status:"info",title:"edit-assets"},{icon:"trash-2-outline",status:"danger",title:"delete-assets"}]}],this.dataSubject=new X.c,this.transformExcelDate=v=>null==v?"":new Date(Math.round(86400*(v-25569)*1e3))}ngOnInit(){this.assetsService.getPipingAssets().subscribe(({data:e})=>{this.tableData=e.map(n=>{let{tm_inspection_interval:s,ve_inspection_interval:l}=n;return({tm_inspection_interval:s,ve_inspection_interval:l}=this.variables.getInspectionInt(n)),s=s?s.toFixed(1):0,l=l?l.toFixed(1):0,Object.assign(Object.assign({},n),{tm_inspection_interval:s,ve_inspection_interval:l})}),this.viewTable.regenerateTable(this.tableData)},()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."))}onClickTable(e,n){"delete-assets"==n&&this.deleteAsset(e),"edit-assets"==n&&this.updateAssets(e),"class-assets"==n&&this.filterByClass(e),"Export To Excel"==n&&this.exportExcelFile()}filterByClass(e){if("All"==e)this.viewTable.regenerateTable(this.tableData);else{const n=this.tableData.filter(s=>s.class==e);this.viewTable.regenerateTable(n)}}uploadImage(e){const n=new FormData;n.append("image",e),this.pageMenuService.addImage(n).pipe((0,F.R)(this.destroy$)).subscribe(s=>{this.dataSubject.next(s),this.dataSubject.complete()},()=>this.toastrService.danger("Please check your connection and try again.","Failed to upload image."))}addAssets(){this.dialogService.open(k,{context:{dialogData:{title:"Add Assets"}}}).onClose.subscribe(e=>{!e||this.reconstructAssetsData(e,"add")})}updateAssets(e){this.dialogService.open(k,{context:{dialogData:{title:"Update Assets",data:Object.assign(Object.assign({},e),{date_in_service:new Date(e.date_in_service)})}}}).onClose.subscribe(n=>{!n||this.reconstructAssetsData(n,"update",e)})}reconstructAssetsData(e,n,s=null){const{image:l}=e,d=Object.assign(Object.assign(Object.assign({},s),e),{date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});if(l)for(let h of l)this.uploadImage(h);this.dataSubject.asObservable().pipe((0,F.R)(this.destroy$)).subscribe(h=>{var v;let P=[...null!==(v=null==s?void 0:s.images)&&void 0!==v?v:[]],S=h.data.id;for(let U=S;U<S+l.length;U++)P.push(U);d.images=P,"add"==n&&this.onUploadaddAsset(d),"update"==n&&this.onUploadUpdateAsset(d)}),"add"==n&&!l&&this.onUploadaddAsset(d),"update"==n&&!l&&this.onUploadUpdateAsset(d)}onUploadaddAsset(e){this.assetsService.addPipingAssets(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}onUploadUpdateAsset(e){this.assetsService.updatePipingAssets(e).pipe((0,F.R)(this.destroy$)).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been updated.","Your request success."))}deleteAsset(e){this.dialogService.open(_.F,{context:{dialogData:{title:"Delete Assets",name:e.piping_name,id:e.id}}}).onClose.subscribe(n=>{n&&this.assetsService.deletePipingAssets(n.id).pipe((0,F.R)(this.destroy$)).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been delete.","Your request success."))})}exportExcelFile(){const e=this.viewTable.selectTableRow(),s={Sheets:{"Piping Assets":I.P6.json_to_sheet(e)},SheetNames:["Piping Assets"]},l=I.cW(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(l,"Assets")}saveAsExcelFile(e,n){const s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ht.saveAs(s,n+"_PIPING_MONITORING_"+(new Date).getTime()+".xlsx")}importExcelFile(e){const n=e.target.files[0];if(!n)return;const s=new FileReader;s.readAsBinaryString(n),s.onload=l=>{const v=I.ij(l.target.result,{type:"binary"}).Sheets["Data Assets"];let P=0,S=!0;for(;S;){if(P>100&&(S=!1),v["A"+P]){S=!1;break}P++}const U=I.P6.sheet_to_json(v,{range:P-1,defval:""});this.reconstructDataExcel(U)}}reconstructDataExcel(e){e=e.map(n=>{let{"Piping ID":s,"Piping Name":l,NPS:d,"Pipe Design Code":h,Schedule:v,"Outside Diameter":P,"Long. Quality Factor":S,"Weld Joint Factor":U,"Allowable Stress":L,Coefficient:se,"Min. Design Pressure":oe,"Max. Design Pressure":ae,"Min. Design Temperature":re,"Max. Design Temperature":le,"Corrosion Allowance":ce,"Mechanical Allowance":de,"Min. Structural Thickness":ue,"Min. Alert Thickness":pe,"Nominal Thickness":he,"Date in Service":ne,Notes:me,Recomendation:ge,Class:fe}=n;return ne=this.datePipe.transform(this.transformExcelDate(ne),"yyyy-MM-dd"),{piping_id:s,piping_name:l,nominal_pipe_size:d,pipe_design_code:h,schedule:v,outside_diameter:P,longtd_quality_factor:S,weld_joint_factor:U,allowable_unit_stress:L,coefficient:se,min_design_pressure:oe,max_design_pressure:ae,min_design_temperature:re,max_design_temperature:le,corrosion_allowance:ce,mechanical_allowance:de,min_structural_thickness:ue,min_alert_thickness:pe,nominal_thickness:he,date_in_service:ne,notes:me,recomendation:ge,class:fe}}),this.assetsService.importAsset(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been delete.","Your request success."))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(nt),t.Y36(p.Gln),t.Y36(p.quB),t.Y36(f),t.Y36(g.uU),t.Y36(z.L))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-piping-assets"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Z.V,5),t.Gf(xt,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.viewTable=s.first),t.iGM(s=t.CRH())&&(n.pdfAssets=s.first)}},decls:5,vars:13,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData","onClickTable"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],["type","file","accept",".xls,.xlsx",2,"display","none",3,"change"],["importExcel",""],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,it,6,4,"button",0),t.qZA()(),t.TgZ(3,"ngx-mat-table",1),t.NdJ("onClickTable",function(l){return n.onClickTable(l.data,l.title)}),t.qZA(),t._UZ(4,"pdf-assets-dashboard")),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.l5B(8,At,t.DdM(4,j),t.DdM(5,H),t.DdM(6,st),t.DdM(7,yt))),t.xp6(1),t.Q6J("tableHeader",n.tableHeader)("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[p.Asz,p.yKW,g.sg,p.DPz,p.fMN,Z.V,xt],encapsulation:2}),i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Tt(i,o){if(1&i&&(t.TgZ(0,"nb-option",43),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",null==e?null:e.piping_id," ")}}function at(i,o){if(1&i&&(t.TgZ(0,"nb-option",43),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Dt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",44)(1,"div",45)(2,"img",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(52).click()}),t.qZA()()()}if(2&i){const e=o.$implicit;t.Q6J("ngClass",0==o.index?"active":""),t.xp6(2),t.Q6J("src",e.src,t.LSH)("alt",null==e?null:e.alt)}}const Mt=function(){return[]},rt=function(){return[1,2,3,4]},N=function(i){return{display:i}};let lt=(()=>{class i{constructor(e,n,s,l){this.dialog=e,this.assetsService=n,this.pageMenuService=s,this.toastr=l,this.apiUrl=y.N.apiUrl,this.imageLink=[],this.loading=null}ngOnInit(){var e,n;this.assetsService.getPipingAssets().subscribe(({data:l})=>{this.piping=l.filter(d=>{var h,v;return!d.piping_circuit||(null===(v=null===(h=this.dialogData)||void 0===h?void 0:h.data)||void 0===v?void 0:v.piping_id.includes(d.id))})});const s=null===(n=null===(e=this.dialogData)||void 0===e?void 0:e.data)||void 0===n?void 0:n.images;s&&(this.imageLink=s.map(l=>({src:this.apiUrl+"/image/"+l,alt:"Piping Assets"})))}onFileChange(e){const n=e.target.files;this.uploadImageFile=n;for(let l of n){var s=new FileReader;s.readAsDataURL(l),s.onload=d=>{this.imageLink.push({src:d.target.result,alt:l.name})}}}parseInt(e){return e?parseInt(e):null}onUploadAttachment(e){const n=e.target.files[0],s=new FormData;s.append("document",n),this.pageMenuService.addDocument(s).subscribe(l=>{if(l.type===A.dt.UploadProgress)this.loading=100*Math.round(l.loaded/l.total);else if(l.type===A.dt.Response){const d=l,{id:h}=d.body.data;this.attachment=h,this.loading=null,this.toastr.success("Your File has been uploaded.","Success upload file.")}})}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{image:this.uploadImageFile,attachment:this.attachment}),this.dialog.close(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.X4l),t.Y36(nt),t.Y36(f),t.Y36(p.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-add-circuit"]],inputs:{dialogData:"dialogData"},decls:60,vars:22,consts:[[1,"d-flex","justify-content-center","align-items-center","mt-4"],["nbSpinnerStatus","success",1,"mt-5",2,"max-height","35rem","min-width","90rem",3,"nbSpinner","nbSpinnerMessage"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["addCircuitForm","ngForm"],[1,"row"],[1,"col-6"],["for","piping_circuit_id",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","piping_circuit_id","name","piping_circuit_id","required","",3,"ngModel"],["for","piping_id",1,"mb-1","d-block"],["multiple","","placeholder","Select Assets","name","piping_id",2,"min-width","35rem",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","piping_circuit_name",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","piping_circuit_name","name","piping_circuit_name","required","",3,"ngModel"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","date_in_service","required","",3,"nbDatepicker","ngModel"],["datepicker",""],["for","class",1,"mb-1","d-block"],["placeholder","Class","size","small","status","primary","name","class","required","",3,"ngModel"],["for","notes",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","type","text","id","notes","name","notes",3,"ngModel"],["for","addAttach",1,"d-block","mb-1"],["fullWidth","","fieldSize","tiny","nbInput","","type","file","id","addAttach","accept","application/pdf","id","addAttachment","name","attachment",3,"ngModel","change"],["addAttach",""],[1,"col-6","align-self-center"],["id","carouselExampleInterval","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item","data-bs-interval","10000",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleInterval","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["placeholder","Add image","multiple","","fullWidth","","nbInput","","type","file","accept","image/png, image/gif, image/jpeg","id","addImage",2,"display","none",3,"ngStyle","change"],["addImage",""],["for","recomendation",1,"d-block","mb-1"],["fullWidth","","nbInput","","name","recomendation","id","recomendation","rows","2","name","recomendation",3,"ngModel"],[1,"d-flex","justify-content-center"],["nbButton","","status","success","type","submit",1,"m-1","w-100",3,"disabled"],[3,"value"],["data-bs-interval","10000",1,"carousel-item",3,"ngClass"],[1,"overflow-hidden","d-flex","align-justify-center",2,"height","18rem"],[1,"w-100",3,"src","alt","click"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"nb-card",1)(2,"nb-card-header",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.closeDialog()}),t._UZ(7,"nb-icon",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(s);const d=t.MAs(10);return n.closeDialog(d.value)}),t.TgZ(11,"div",9)(12,"div",10)(13,"label",11),t._uU(14,"Piping Circuit Id"),t.qZA(),t._UZ(15,"input",12),t.TgZ(16,"label",13),t._uU(17,"Piping Id"),t.qZA(),t.TgZ(18,"nb-select",14),t.YNc(19,Tt,2,2,"nb-option",15),t.qZA(),t.TgZ(20,"label",16),t._uU(21,"Piping Circuit Name"),t.qZA(),t._UZ(22,"input",17),t.TgZ(23,"label",18),t._uU(24,"Date In Service"),t.qZA(),t._UZ(25,"input",19)(26,"nb-datepicker",null,20),t.TgZ(28,"label",21),t._uU(29,"Class"),t.qZA(),t.TgZ(30,"nb-select",22),t.YNc(31,at,2,2,"nb-option",15),t.qZA(),t.TgZ(32,"label",23),t._uU(33,"Notes"),t.qZA(),t._UZ(34,"input",24),t.TgZ(35,"label",25),t._uU(36,"Attachment"),t.qZA(),t.TgZ(37,"input",26,27),t.NdJ("change",function(d){return n.onUploadAttachment(d)}),t.qZA()(),t.TgZ(39,"div",28)(40,"div",29)(41,"div",30),t.YNc(42,Dt,3,3,"div",31),t.qZA(),t.TgZ(43,"button",32),t._UZ(44,"span",33),t.TgZ(45,"span",34),t._uU(46,"Previous"),t.qZA()(),t.TgZ(47,"button",35),t._UZ(48,"span",36),t.TgZ(49,"span",34),t._uU(50,"Next"),t.qZA()()(),t.TgZ(51,"input",37,38),t.NdJ("change",function(d){return n.onFileChange(d)}),t.qZA()(),t.TgZ(53,"div")(54,"label",39),t._uU(55,"Recomendation"),t.qZA(),t._UZ(56,"textarea",40),t.qZA(),t.TgZ(57,"div",41)(58,"button",42),t._uU(59),t.qZA()()()()()()()}if(2&e){const s=t.MAs(10),l=t.MAs(27);let d;t.xp6(1),t.Q6J("nbSpinner",n.loading)("nbSpinnerMessage",n.loading),t.xp6(3),t.Oqu(null==n.dialogData?null:n.dialogData.title),t.xp6(11),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_circuit_id),t.xp6(3),t.Q6J("ngModel",null!==(d=null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_id)&&void 0!==d?d:t.DdM(18,Mt)),t.xp6(1),t.Q6J("ngForOf",n.piping),t.xp6(3),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.piping_circuit_name),t.xp6(3),t.Q6J("nbDatepicker",l)("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.date_in_service),t.xp6(5),t.Q6J("ngModel",n.parseInt(null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.class)),t.xp6(1),t.Q6J("ngForOf",t.DdM(19,rt)),t.xp6(3),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.notes),t.xp6(3),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.attachment),t.xp6(5),t.Q6J("ngForOf",n.imageLink),t.xp6(9),t.Q6J("ngStyle",t.VKq(20,N,n.imageLink.length?"none":"block")),t.xp6(5),t.Q6J("ngModel",null==n.dialogData||null==n.dialogData.data?null:n.dialogData.data.recomendation),t.xp6(2),t.Q6J("disabled",!s.form.valid),t.xp6(1),t.Oqu(null==n.dialogData?null:n.dialogData.title)}},directives:[p.Asz,p.Q7R,p.ndF,p.DPz,p.fMN,p.yKW,m._Y,m.JL,m.F,p.h8i,m.Fj,m.Q7,m.JJ,m.On,p.rs,g.sg,p.q51,p.$kf,p.B4C,g.mk,g.PC],encapsulation:2}),i})();var R=c(2787);function Zt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.MAs(2),h=t.oxw();return"New"==l.name?h.addCircuit():"Import"==l.name?d.click():"Export"==l.name?h.export():"Print"==l.name?h.printCircuit():null}),t.TgZ(1,"input",3,4),t.NdJ("change",function(s){return t.CHM(e),t.oxw().importExcelFile(s)}),t.qZA(),t._UZ(3,"nb-icon",5),t.TgZ(4,"span"),t._uU(5),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();let s;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(3),t.Q6J("icon",e.icon)("pack",null!==(s=e.pack)&&void 0!==s?s:"eva"),t.xp6(2),t.Oqu(e.name)}}const Pt=function(){return{name:"New",icon:"plus-outline"}},ct=function(){return{name:"Import",icon:"download-outline"}},St=function(){return{name:"Export",icon:"upload-outline"}},Ut=function(){return{name:"Print",icon:"printer-outline"}},wt=function(i,o,e,n){return[i,o,e,n]};let Ft=(()=>{class i{constructor(e,n,s,l,d){this.circuitService=e,this.dialogService=n,this.toastrService=s,this.datePipe=l,this.pageMenuService=d,this.tableHeader={title:"Piping Circuits",filter:[{name:"Class",value:["All",1,2,3,4],title:"class-circuit"}]},this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"piping_circuit_id",head:"Piping Circuit Id",width:"100px"},{type:"text",prop:"piping_circuit_name",head:"Piping Circuit Name",width:"200px"},{type:"text",prop:"date_in_service",head:"Date In Service",width:"200px"},{type:"text",prop:"class",head:"Class",width:"200px"},{type:"text",prop:"notes",head:"Notes",width:"200px"},{type:"button",prop:"edit",width:"80px",button:[{icon:"edit-outline",status:"info",title:"update-circuits"},{icon:"trash-2-outline",status:"danger",title:"delete-circuits"}]}],this.dataSubject=new X.c}ngOnInit(){this.circuitService.getPipingCircuits().subscribe(({data:e})=>{this.tableData=e,this.viewTable.regenerateTable(e)})}onClickTable(e,n){if("class-circuit"==n)if("All"==e)this.viewTable.regenerateTable(this.tableData);else{const s=this.tableData.filter(l=>l.class==e);this.viewTable.regenerateTable(s)}"update-circuits"==n&&this.updateCircuit(e),"delete-circuits"==n&&this.deleteCircuit(e)}uploadImage(e){const n=new FormData;n.append("image",e),this.pageMenuService.addImage(n).subscribe(s=>{this.dataSubject.next(s),this.dataSubject.complete()},()=>this.toastrService.danger("Please check your connection and try again.","Failed to upload image."))}addCircuit(){this.dialogService.open(lt,{context:{dialogData:{title:"Add Circuit"}}}).onClose.subscribe(e=>{!e||this.reconstructDataCircuit(e,"add")})}updateCircuit(e){const n=e.piping.map(s=>s.id);this.dialogService.open(lt,{context:{dialogData:{title:"Update Circuit",data:Object.assign(Object.assign({},e),{date_in_service:new Date(e.date_in_service),piping_id:n})}}}).onClose.subscribe(s=>{!s||this.reconstructDataCircuit(s,"update",e)})}reconstructDataCircuit(e,n,s=null){const{image:l}=e;if(l)for(let h of l)this.uploadImage(h);this.dataSubject.asObservable().subscribe(h=>{var v;let P=[...null!==(v=null==s?void 0:s.images)&&void 0!==v?v:[]],S=h.data.id;for(let L=S;L<S+l.length;L++)P.push(L);const U=Object.assign(Object.assign(Object.assign({},s),e),{images:P,date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});console.log(U),"add"==n&&this.onUploadaddCircuit(U),"update"==n&&this.onUploadUpdateCircuit(U)});const d=Object.assign(Object.assign(Object.assign({},s),e),{date_in_service:this.datePipe.transform(e.date_in_service,"yyyy-MM-dd")});"add"==n&&!l&&this.onUploadaddCircuit(d),"update"==n&&!l&&this.onUploadUpdateCircuit(d)}onUploadaddCircuit(e){this.circuitService.addPipingCircuits(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}onUploadUpdateCircuit(e){this.circuitService.updatePipingCircuits(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))}deleteCircuit(e){this.dialogService.open(_.F,{context:{dialogData:{title:"Add Circuit",name:e.piping_circuit_name,id:e.id}}}).onClose.subscribe(n=>{!n||this.circuitService.deletePipingCircuits(n.id).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(R.t),t.Y36(p.Gln),t.Y36(p.quB),t.Y36(g.uU),t.Y36(f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-piping-circuits"]],viewQuery:function(e,n){if(1&e&&t.Gf(Z.V,5),2&e){let s;t.iGM(s=t.CRH())&&(n.viewTable=s.first)}},decls:4,vars:13,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData","onClickTable"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],["type","file","accept",".xls,.xlsx",2,"display","none",3,"change"],["importExcel",""],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,Zt,6,4,"button",0),t.qZA()(),t.TgZ(3,"ngx-mat-table",1),t.NdJ("onClickTable",function(l){return n.onClickTable(l.data,l.title)}),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.l5B(8,wt,t.DdM(4,Pt),t.DdM(5,ct),t.DdM(6,St),t.DdM(7,Ut))),t.xp6(1),t.Q6J("tableHeader",n.tableHeader)("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[p.Asz,p.yKW,g.sg,p.DPz,p.fMN,Z.V],encapsulation:2}),i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var W=c(4204),V=c(4107),It=c(3252);const Q=function(i){return{color:i}};function K(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,36),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const l=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionCircuit==l?"#0492c2":"black"})("click",function(){const l=t.CHM(e).index;return t.oxw(2).selectCircuit(l)}),t._uU(3),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index,s=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,Q,s.selectionCircuit==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_circuit_name," ")}}function kt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,37),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const l=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionPipe==l?"#0492c2":"black"})("click",function(){const s=t.CHM(e),l=s.index,d=s.$implicit;return t.oxw(2).selectPipe(l,d)}),t._uU(3),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index,s=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,Q,s.selectionPipe==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_id," ")}}function Et(i,o){if(1&i&&(t.TgZ(0,"nb-list-item",34)(1,"span",null,37),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.xp6(3),t.hij(" ",null==e?null:e.piping_id," ")}}function Ot(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",38),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).selectInspectionType(l)}),t._uU(1),t.qZA()}if(2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function dt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-list-item",39)(1,"span",35,40),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const l=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionMethod==l?"#0492c2":"black"})("click",function(){const l=t.CHM(e).index;return t.oxw(2).selectMethod(l)}),t._uU(3),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index,s=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,Q,s.selectionMethod==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",null==e?null:e.name," ")}}function ut(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-list-item",34)(1,"span",35,41),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(2).style.color="#0492c2"})("mouseout",function(){const l=t.CHM(e).index;return t.MAs(2).style.color=t.oxw(2).selectionTechnique==l?"#0492c2":"black"})("click",function(){const s=t.CHM(e),l=s.index,d=s.$implicit;return t.oxw(2).selectTechnique(l,d.name)}),t._uU(3),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index,s=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,Q,s.selectionTechnique==n?"#0492c2":"black")),t.xp6(2),t.hij(" ",null==e?null:e.name," ")}}function jt(i,o){if(1&i&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",null==e?null:e.method," ")}}function pt(i,o){if(1&i&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",null==e?null:e.technique," ")}}function Nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-list-item",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).activationMethod(l)}),t.TgZ(3,"div",45)(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"nb-icon",46),t.qZA()(),t.TgZ(7,"span",47),t._uU(8),t.qZA(),t.YNc(9,jt,2,1,"span",48),t.YNc(10,pt,2,1,"span",48),t._UZ(11,"input",49),t.TgZ(12,"div",50)(13,"button",6),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw(2).deleteMethod(l)}),t._UZ(14,"nb-icon",51),t.qZA()()()()}if(2&i){const e=o.$implicit,n=o.index;t.xp6(5),t.hij(" ",n+1," "),t.xp6(1),t.Q6J("icon",null!=e&&e.active?"radio-button-on-outline":"radio-button-off-outline")("status",null!=e&&e.active?"success":"basic"),t.xp6(2),t.hij(" ",null==e?null:e.type," "),t.xp6(1),t.Q6J("ngIf",null==e?null:e.method),t.xp6(1),t.Q6J("ngIf",null==e?null:e.technique)}}const Jt=function(){return["Instrusive","Non Instrusive"]};function Lt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"nb-card",2)(2,"nb-card-header",3)(3,"h5",4),t._uU(4),t.qZA(),t.TgZ(5,"div",5)(6,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t._UZ(7,"nb-icon",7),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"form",8,9),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.MAs(10);return t.oxw().closeDialog(s.value)}),t.TgZ(11,"h6"),t._uU(12,"IN"),t.qZA(),t.TgZ(13,"section")(14,"nb-card",10)(15,"nb-card-body",3)(16,"div",4)(17,"span",11),t._uU(18,"Circuit ID"),t.qZA(),t.TgZ(19,"nb-list"),t.YNc(20,K,4,4,"nb-list-item",12),t.qZA()(),t.TgZ(21,"div",13)(22,"span",11),t._uU(23,"Piping ID"),t.qZA(),t.TgZ(24,"nb-list"),t.YNc(25,kt,4,4,"nb-list-item",12),t.qZA()(),t.TgZ(26,"div",13)(27,"span",11),t._uU(28,"Choosen Pipe"),t.qZA(),t.TgZ(29,"nb-list"),t.YNc(30,Et,4,1,"nb-list-item",12),t.qZA()()()(),t.TgZ(31,"div")(32,"div",14)(33,"div")(34,"label",15),t._uU(35,"Proposal ID"),t.qZA(),t._UZ(36,"input",16),t.qZA(),t.TgZ(37,"div")(38,"label",15),t._uU(39,"Inspection Planned Date"),t.qZA(),t._UZ(40,"input",17)(41,"nb-datepicker",null,18),t.qZA(),t.TgZ(43,"div")(44,"label",15),t._uU(45,"Recomendation Date"),t.qZA(),t._UZ(46,"input",19)(47,"nb-datepicker",null,20),t.qZA()(),t.TgZ(49,"div",4)(50,"label",21),t._uU(51,"Remarks"),t.qZA(),t._UZ(52,"textarea",22),t.qZA()()(),t.TgZ(53,"h6",23),t._uU(54,"Inspection Method"),t.qZA(),t.TgZ(55,"section",24)(56,"div",25)(57,"mat-form-field",26)(58,"mat-label"),t._uU(59,"Inspection Type"),t.qZA(),t.TgZ(60,"mat-select"),t.YNc(61,Ot,2,2,"mat-option",27),t.qZA()()(),t.TgZ(62,"div",28)(63,"nb-card")(64,"nb-card-body",3)(65,"div",29)(66,"span",11),t._uU(67,"Inspection Method"),t.qZA(),t.TgZ(68,"nb-list"),t.YNc(69,dt,4,4,"nb-list-item",30),t.qZA()(),t.TgZ(70,"div",4)(71,"span",11),t._uU(72,"Inspection Technique"),t.qZA(),t.TgZ(73,"nb-list"),t.YNc(74,ut,4,4,"nb-list-item",12),t.qZA()()()()(),t.TgZ(75,"div",28)(76,"nb-card",31)(77,"nb-list"),t.YNc(78,Nt,15,6,"nb-list-item",32),t.qZA()()()(),t.TgZ(79,"button",33),t._uU(80,"Add Proposal"),t.qZA()()()()()}if(2&i){const e=t.MAs(42),n=t.MAs(48),s=t.oxw();t.xp6(4),t.Oqu(null==s.dialogData?null:s.dialogData.title),t.xp6(16),t.Q6J("ngForOf",s.circuitData),t.xp6(5),t.Q6J("ngForOf",null==s.circuitData[s.selectionCircuit]?null:s.circuitData[s.selectionCircuit].piping),t.xp6(5),t.Q6J("ngForOf",s.choosenPipe),t.xp6(10),t.Q6J("nbDatepicker",e),t.xp6(6),t.Q6J("nbDatepicker",n),t.xp6(15),t.Q6J("ngForOf",t.DdM(11,Jt)),t.xp6(8),t.Q6J("ngForOf",s.inspectionMethod),t.xp6(5),t.Q6J("ngForOf",null==s.inspectionMethod[s.selectionMethod]?null:s.inspectionMethod[s.selectionMethod].children),t.xp6(4),t.Q6J("ngForOf",s.inspectionMethodList),t.xp6(1),t.Q6J("disabled",!s.choosenPipe.length)}}let qt=(()=>{class i{constructor(e,n,s){this.circuitService=e,this.toastr=n,this.dialog=s,this.selectionCircuit=0,this.selectionMethod=0,this.inspectionMethodList=[],this.choosenPipe=[],this.inspectionMethod=[{name:"Acoustic Emission",children:[{name:"Crack Detection"},{name:"Leak Detection"}]},{name:"Eddy Current",children:[{name:"ACFM"},{name:"Low Frequency"},{name:"Pulsed"},{name:"Remote Field"},{name:"Standard (flat coil)"}]},{name:"Magnetic",children:[{name:"Magnetic Fluorescent Inspection"},{name:"Magnetic Flux Leakage"},{name:"Magnetic Particle Inspection"}]},{name:"Metallurgical",children:[{name:"Hardness Surveys"},{name:"Microstructure Replication"}]},{name:"Monitoring",children:[{name:"On-line Monitoring"}]},{name:"Penetrant",children:[{name:"Liquid Penetrant Inspection"},{name:"Penetrant Leak Inspection"}]},{name:"Radiography",children:[{name:"Compton Scatter"},{name:"Gamma Radiography"},{name:"Real-time Radiography"},{name:"X-Radiography"}]},{name:"Thermography",children:[{name:"Passive Thermography"},{name:"Transient Thermography"}]},{name:"Ultrasonic",children:[{name:"Advanced Ultrasonic Backscatter Technique"},{name:"Angled Compression Wave"},{name:"Angled Shear Wave"},{name:"A-scan Thickness Survey"},{name:"B-Scan"},{name:"Chime"},{name:"C-Scan"},{name:"Digital Ultrasonic Thickness Gauge"},{name:"Internal Rotational Inspection System"},{name:"Lorus"},{name:"Surface Waves"},{name:"Teletest"},{name:"TOFD"}]},{name:"Visual",children:[{name:"Endoscopy"},{name:"Holiday Test"},{name:"Hydrotesting"},{name:"Naked Eye"},{name:"Video"}]}]}ngOnInit(){this.circuitService.getPipingCircuits().subscribe(({data:e})=>{this.circuitData=e})}selectCircuit(e){this.selectionPipe=null,this.selectionCircuit=e}selectPipe(e,n){this.selectionPipe=e,this.choosenPipe.includes(n)||this.choosenPipe.push(n)}selectMethod(e){if(!this.inspectionMethodList.length)return this.toastr.danger("Please input inspection type first.","Selection denied.");this.selectionTechnique=null,this.selectionMethod=e,this.inspectionMethodList[this.activeMethod].method=this.inspectionMethod[this.selectionMethod].name}selectTechnique(e,n){if(!this.inspectionMethodList.length)return this.toastr.danger("Please input inspection type first.","Selection denied.");this.selectionTechnique=e,this.inspectionMethodList[this.activeMethod].method=this.inspectionMethod[this.selectionMethod].name,this.inspectionMethodList[this.activeMethod].technique=n}selectInspectionType(e){this.inspectionMethodList=this.inspectionMethodList.map(n=>Object.assign(Object.assign({},n),{active:!1})),this.inspectionMethodList.push({type:e,active:!0}),this.activeMethod=this.inspectionMethodList.length-1}activationMethod(e){this.inspectionMethodList=this.inspectionMethodList.map(n=>Object.assign(Object.assign({},n),{active:!1})),this.inspectionMethodList[e].active=!0,this.activeMethod=e}deleteMethod(e){console.log(e),this.inspectionMethodList[e]=null,this.inspectionMethodList=this.inspectionMethodList.filter(n=>null!=n),e==this.inspectionMethodList.length&&this.activationMethod(e-1),console.log(this.inspectionMethodList)}closeDialog(e=null){e||this.dialog.close(),e&&(e=Object.assign(Object.assign({},e),{list_of_piping_id:this.choosenPipe.map(n=>n.id),inspection_method:this.inspectionMethodList}),this.dialog.close(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(R.t),t.Y36(p.quB),t.Y36(p.X4l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-add-proposal"]],inputs:{dialogData:"dialogData"},decls:1,vars:1,consts:[["class","w-100 d-flex justify-content-center mt-5",4,"ngIf"],[1,"w-100","d-flex","justify-content-center","mt-5"],[1,"mt-5",2,"max-height","35rem","min-width","90rem"],[1,"d-flex"],[1,"w-100"],[1,"flex-shrink-1"],["nbButton","","status","danger","size","tiny",3,"click"],["icon","close-outline"],[3,"ngSubmit"],["proposalForm","ngForm"],[2,"max-height","15rem"],[1,"text-secondary"],["style","max-height: .7rem;",4,"ngFor","ngForOf"],[1,"w-100","ms-4"],[1,"d-flex","justify-content-evenly"],["for","dateInService",1,"mb-1","d-block"],["fullWidth","","nbInput","","fieldSize","small","name","proposal_id","ngModel",""],["fullWidth","","nbInput","","fieldSize","small","name","inspection_planned_date","ngModel","",3,"nbDatepicker"],["inspection_planned_date",""],["fullWidth","","nbInput","","fieldSize","small","name","recomendation_date","ngModel","",3,"nbDatepicker"],["recomendation_date",""],["for","remarks",1,"d-block"],["nbInput","","ngModel","","name","remarks","id","remarks","rows","2","fullWidth",""],[1,"mt-5"],[1,"row"],[1,"col-12"],[1,"my-2"],[3,"value","click",4,"ngFor","ngForOf"],[1,"col-6","p-1"],[1,"w-50"],["style","max-height: .7rem; cursor: pointer;",4,"ngFor","ngForOf"],[2,"max-height","24rem"],["style","cursor: pointer;","class","w-100",4,"ngFor","ngForOf"],["nbButton","","status","success","size","small",1,"w-100",3,"disabled"],[2,"max-height",".7rem"],[2,"cursor","pointer",3,"ngStyle","mouseover","mouseout","click"],["circuitcell",""],["pipingcell",""],[3,"value","click"],[2,"max-height",".7rem","cursor","pointer"],["methodcell",""],["techniquecell",""],[1,"w-100",2,"cursor","pointer"],[1,"d-flex","justify-content-between","w-100","row"],[1,"col-1",3,"click"],[1,"d-flex","align-items-center"],[1,"align-self-center","ms-2",2,"font-size","20px",3,"icon","status"],[1,"col-2"],["class","col-2",4,"ngIf"],["type","number","nbInput","","min","0","max","100","fieldSize","tiny",1,"col-2"],[1,"col-1","d-flex","justify-content-center","align-items-center"],["icon","trash-2-outline"]],template:function(e,n){1&e&&t.YNc(0,Lt,81,12,"div",0),2&e&&t.Q6J("ngIf",n.circuitData)},directives:[g.O5,p.Asz,p.ndF,p.DPz,p.fMN,p.yKW,m._Y,m.JL,m.F,p.zP_,g.sg,p.qBV,g.PC,p.h8i,m.Fj,m.JJ,m.On,p.$kf,p.B4C,W.KE,W.hX,V.gD,It.ey],encapsulation:2}),i})(),Rt=(()=>{class i{constructor(e){this.httpClient=e,this.apiUrl=y.N.apiUrl}getProposals(){return this.httpClient.get(this.apiUrl+"/proposal")}addProposals(e){return this.httpClient.post(this.apiUrl+"/proposal",e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Qt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return"New"==l.name?d.addProposal():"Print"==l.name?d.printProposal():null}),t._UZ(1,"nb-icon",3),t.TgZ(2,"span"),t._uU(3),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();let s;t.Q6J("disabled",!("Export"!=(null==e?null:e.name)&&"Print"!=(null==e?null:e.name)||null!=n.tableData&&n.tableData.length)),t.xp6(1),t.Q6J("icon",e.icon)("pack",null!==(s=e.pack)&&void 0!==s?s:"eva"),t.xp6(2),t.Oqu(e.name)}}const Yt=function(){return{name:"New",icon:"plus-outline"}},Bt=function(){return{name:"Print",icon:"printer-outline"}},zt=function(i,o){return[i,o]},Ht=function(){return{title:"Proposal"}},G=[{path:"",component:w,children:[{path:"piping-assets",component:Ct,data:{routename:"assets"}},{path:"piping-circuits",component:Ft,data:{routename:"circuit"}},{path:"view-proposal",component:(()=>{class i{constructor(e,n,s,l){this.proposalService=e,this.dialogService=n,this.datePipe=s,this.toastrService=l,this.tableData=[],this.columnDetails=[{type:"select",prop:"select",head:"",width:"20px"},{type:"text",prop:"proposal_id",head:"Proposal ID",width:"100px"},{type:"text",prop:"inspection_planned_date",head:"Inspection Plan Date",width:"200px"},{type:"text",prop:"piping_circuit",head:"Piping Circuit",width:"200px"},{type:"text",prop:"remarks",head:"Remarks",width:"200px"}]}ngOnInit(){this.proposalService.getProposals().subscribe(({data:e})=>{this.tableData=e,this.viewTable.regenerateTable(e)})}printProposal(){console.log("print")}addProposal(){this.dialogService.open(qt,{context:{dialogData:{title:"Add Proposal"}}}).onClose.subscribe(e=>{if(!e)return;const{inspection_planned_date:n,recomendation_date:s}=e;e=Object.assign(Object.assign({},e),{inspection_planned_date:this.datePipe.transform(n,"yyyy-MM-dd"),recomendation_date:this.datePipe.transform(s,"yyyy-MM-dd")}),console.log(e),this.proposalService.addProposals(e).subscribe(()=>this.ngOnInit(),()=>this.toastrService.danger("Please check your connection and try again.","Your request failed."),()=>this.toastrService.success("Data has been added.","Your request success."))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Rt),t.Y36(p.Gln),t.Y36(g.uU),t.Y36(p.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-view-proposal"]],viewQuery:function(e,n){if(1&e&&t.Gf(Z.V,5),2&e){let s;t.iGM(s=t.CRH())&&(n.viewTable=s.first)}},decls:4,vars:10,consts:[["nbButton","","outline","","size","small","status","primary","class","m-2",3,"disabled","click",4,"ngFor","ngForOf"],[3,"tableHeader","columnDetails","tableData"],["nbButton","","outline","","size","small","status","primary",1,"m-2",3,"disabled","click"],[1,"m-1",3,"icon","pack"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-body"),t.YNc(2,Qt,4,4,"button",0),t.qZA()(),t._UZ(3,"ngx-mat-table",1)),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.WLB(6,zt,t.DdM(4,Yt),t.DdM(5,Bt))),t.xp6(1),t.Q6J("tableHeader",t.DdM(9,Ht))("columnDetails",n.columnDetails)("tableData",n.tableData))},directives:[p.Asz,p.yKW,g.sg,p.DPz,p.fMN,Z.V],encapsulation:2}),i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),data:{routename:"proposal"}}]}];let Wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[M.Bz.forChild(G)],M.Bz]}),i})();var Vt=c(2356),Kt=c(9511),$t=c(2368),Gt=c(8279),Xt=c(7446),te=c(5331),ee=c(7531),u=c(8246);let a=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,T.O,p.j7H.forChild({closeOnBackdropClick:!0}),p.zyh,p.KdK,p.T2N]]}),i})(),r=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,T.O,p.j5J,p.zyh,p.x4g,p.IIj,p.oGl,p.nKr,p.OA,p.T2N,p.KdK,p.COg,p.KdK,p.LW9.forRoot({destroyByClick:!0,duration:3e3,position:p.fe3.BOTTOM_RIGHT,preventDuplicates:!0,limit:3}),p.uuI,u.F5,m.u5,Wt,Vt.Z,Kt.H,$t.rP,Gt.p0,Xt.p9,te.TU,W.lN,ee.c,V.LD,a]]}),i})()},2787:(O,C,c)=>{"use strict";c.d(C,{t:()=>M});var g=c(2340),T=c(5e3),p=c(520);let M=(()=>{class t{constructor(_){this.httpClient=_,this.apiUrl=g.N.apiUrl}getPipingCircuits(){return this.httpClient.get(this.apiUrl+"/circuit")}addPipingCircuits(_){return this.httpClient.post(this.apiUrl+"/circuit",_)}updatePipingCircuits(_){return this.httpClient.put(this.apiUrl+"/circuit/"+_.id,_)}deletePipingCircuits(_){return this.httpClient.delete(this.apiUrl+"/circuit/"+_)}}return t.\u0275fac=function(_){return new(_||t)(T.LFG(p.eN))},t.\u0275prov=T.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9441:function(O,C){var T;void 0!==(T=function(){"use strict";function M(f,m,D){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){A(b.response,m,D)},b.onerror=function(){console.error("could not download file")},b.send()}function t(f){var m=new XMLHttpRequest;m.open("HEAD",f,!1);try{m.send()}catch(D){}return 200<=m.status&&299>=m.status}function w(f){try{f.dispatchEvent(new MouseEvent("click"))}catch(D){var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(m)}}var _="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,y=_.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),A=_.saveAs||("object"!=typeof window||window!==_?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(f,m,D){var b=_.URL||_.webkitURL,x=document.createElement("a");x.download=m=m||f.name||"download",x.rel="noopener","string"==typeof f?(x.href=f,x.origin===location.origin?w(x):t(x.href)?M(f,m,D):w(x,x.target="_blank")):(x.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){w(x)},0))}:"msSaveOrOpenBlob"in navigator?function(f,m,D){if(m=m||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(function p(f,m){return void 0===m?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\ufeff",f],{type:f.type}):f}(f,D),m);else if(t(f))M(f,m,D);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){w(b)})}}:function(f,m,D,b){if((b=b||open("","_blank"))&&(b.document.title=b.document.body.innerText="downloading..."),"string"==typeof f)return M(f,m,D);var x="application/octet-stream"===f.type,q=/constructor/i.test(_.HTMLElement)||_.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent);if((J||x&&q||y)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var E=k.result;E=J?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=E:location=E,b=null},k.readAsDataURL(f)}else{var Z=_.URL||_.webkitURL,F=Z.createObjectURL(f);b?b.location=F:location.href=F,b=null,setTimeout(function(){Z.revokeObjectURL(F)},4e4)}});_.saveAs=A.saveAs=A,O.exports=A}.apply(C,[]))&&(O.exports=T)},2231:(O,C,c)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var g=c(2403);g.Observable.forkJoin=g.forkJoin},2403:(O,C,c)=>{"use strict";c.r(C),c.d(C,{ArgumentOutOfRangeError:()=>ft.W,AsyncSubject:()=>x.c,BehaviorSubject:()=>D.X,ConnectableObservable:()=>T.c,EMPTY:()=>N.E,EmptyError:()=>bt.K,GroupedObservable:()=>y,NEVER:()=>V,Notification:()=>tt.P,NotificationKind:()=>tt.W,ObjectUnsubscribedError:()=>_t.N,Observable:()=>g.y,ReplaySubject:()=>b.t,Scheduler:()=>ht.b,Subject:()=>m.xQ,Subscriber:()=>mt.L,Subscription:()=>p.w,TimeoutError:()=>nt,UnsubscriptionError:()=>vt.B,VirtualAction:()=>I,VirtualTimeScheduler:()=>X,animationFrame:()=>Z.r,animationFrameScheduler:()=>Z.Z,asap:()=>q.e,asapScheduler:()=>q.E,async:()=>J.P,asyncScheduler:()=>J.z,bindCallback:()=>st,bindNodeCallback:()=>ot,combineLatest:()=>Dt.aj,concat:()=>Mt.z,config:()=>ee.v,defer:()=>rt.P,empty:()=>N.c,forkJoin:()=>lt.D,from:()=>R.D,fromEvent:()=>Zt.R,fromEventPattern:()=>ct,generate:()=>St,identity:()=>B.y,iif:()=>wt,interval:()=>Ft.F,isObservable:()=>gt.b,merge:()=>W.T,never:()=>It,noop:()=>et.Z,observable:()=>f.L,of:()=>Q.of,onErrorResumeNext:()=>K,pairs:()=>kt,partition:()=>jt,pipe:()=>Y.z,queue:()=>k.c,queueScheduler:()=>k.N,race:()=>Lt,range:()=>Qt,scheduled:()=>te.x,throwError:()=>Bt._,timer:()=>zt.H,using:()=>Ht,zip:()=>Wt});var g=c(4202),T=c(1762),p=c(4096);class y extends g.y{constructor(a,r,i){super(),this.key=a,this.groupSubject=r,this.refCountSubscription=i}_subscribe(a){const r=new p.w,{refCountSubscription:i,groupSubject:o}=this;return i&&!i.closed&&r.add(new A(i)),r.add(o.subscribe(a)),r}}class A extends p.w{constructor(a){super(),this.parent=a,a.count++}unsubscribe(){const a=this.parent;!a.closed&&!this.closed&&(super.unsubscribe(),a.count-=1,0===a.count&&a.attemptedToUnsubscribe&&a.unsubscribe())}}var f=c(3821),m=c(8929),D=c(591),b=c(2247),x=c(2185),q=c(8139),J=c(353),k=c(341),Z=c(352),F=c(6686),E=c(198);let X=(()=>{class u extends E.v{constructor(r=I,i=Number.POSITIVE_INFINITY){super(r,()=>this.frame),this.maxFrames=i,this.frame=0,this.index=-1}flush(){const{actions:r,maxFrames:i}=this;let o,e;for(;(e=r[0])&&e.delay<=i&&(r.shift(),this.frame=e.delay,!(o=e.execute(e.state,e.delay))););if(o){for(;e=r.shift();)e.unsubscribe();throw o}}}return u.frameTimeFactor=10,u})();class I extends F.o{constructor(a,r,i=(a.index+=1)){super(a,r),this.scheduler=a,this.work=r,this.index=i,this.active=!0,this.index=a.index=i}schedule(a,r=0){if(!this.id)return super.schedule(a,r);this.active=!1;const i=new I(this.scheduler,this.work);return this.add(i),i.schedule(a,r)}requestAsyncId(a,r,i=0){this.delay=a.frame+i;const{actions:o}=a;return o.push(this),o.sort(I.sortActions),!0}recycleAsyncId(a,r,i=0){}_execute(a,r){if(!0===this.active)return super._execute(a,r)}static sortActions(a,r){return a.delay===r.delay?a.index===r.index?0:a.index>r.index?1:-1:a.delay>r.delay?1:-1}}var ht=c(2221),mt=c(3489),tt=c(9312),Y=c(4843),et=c(7876),B=c(5379),gt=c(4715),ft=c(4231),bt=c(4450),_t=c(5279),vt=c(7964);const nt=(()=>{function u(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return u.prototype=Object.create(Error.prototype),u})();var z=c(4850),it=c(9476),j=c(6688),H=c(2866);function st(u,a,r){if(a){if(!(0,H.K)(a))return(...i)=>st(u,r)(...i).pipe((0,z.U)(o=>(0,j.k)(o)?a(...o):a(o)));r=a}return function(...i){const o=this;let e;const n={context:o,subject:e,callbackFunc:u,scheduler:r};return new g.y(s=>{if(r)return r.schedule(yt,0,{args:i,subscriber:s,params:n});if(!e){e=new x.c;const l=(...d)=>{e.next(d.length<=1?d[0]:d),e.complete()};try{u.apply(o,[...i,l])}catch(d){(0,it._)(e)?e.error(d):console.warn(d)}}return e.subscribe(s)})}}function yt(u){const{args:r,subscriber:i,params:o}=u,{callbackFunc:e,context:n,scheduler:s}=o;let{subject:l}=o;if(!l){l=o.subject=new x.c;const d=(...h)=>{this.add(s.schedule(At,0,{value:h.length<=1?h[0]:h,subject:l}))};try{e.apply(n,[...r,d])}catch(h){l.error(h)}}this.add(l.subscribe(i))}function At(u){const{value:a,subject:r}=u;r.next(a),r.complete()}function ot(u,a,r){if(a){if(!(0,H.K)(a))return(...i)=>ot(u,r)(...i).pipe((0,z.U)(o=>(0,j.k)(o)?a(...o):a(o)));r=a}return function(...i){const o={subject:void 0,args:i,callbackFunc:u,scheduler:r,context:this};return new g.y(e=>{const{context:n}=o;let{subject:s}=o;if(r)return r.schedule(Ct,0,{params:o,subscriber:e,context:n});if(!s){s=o.subject=new x.c;const l=(...d)=>{const h=d.shift();h?s.error(h):(s.next(d.length<=1?d[0]:d),s.complete())};try{u.apply(n,[...i,l])}catch(d){(0,it._)(s)?s.error(d):console.warn(d)}}return s.subscribe(e)})}}function Ct(u){const{params:a,subscriber:r,context:i}=u,{callbackFunc:o,args:e,scheduler:n}=a;let s=a.subject;if(!s){s=a.subject=new x.c;const l=(...d)=>{const h=d.shift();this.add(h?n.schedule(at,0,{err:h,subject:s}):n.schedule(Tt,0,{value:d.length<=1?d[0]:d,subject:s}))};try{o.apply(i,[...e,l])}catch(d){this.add(n.schedule(at,0,{err:d,subject:s}))}}this.add(s.subscribe(r))}function Tt(u){const{value:a,subject:r}=u;r.next(a),r.complete()}function at(u){const{err:a,subject:r}=u;r.error(a)}var Dt=c(6053),Mt=c(1221),rt=c(8514),N=c(8896),lt=c(567),R=c(3527),Zt=c(3753),Pt=c(7043);function ct(u,a,r){return r?ct(u,a).pipe((0,z.U)(i=>(0,j.k)(i)?r(...i):r(i))):new g.y(i=>{const o=(...n)=>i.next(1===n.length?n[0]:n);let e;try{e=u(o)}catch(n){return void i.error(n)}if((0,Pt.m)(a))return()=>a(o,e)})}function St(u,a,r,i,o){let e,n;return 1==arguments.length?(n=u.initialState,a=u.condition,r=u.iterate,e=u.resultSelector||B.y,o=u.scheduler):void 0===i||(0,H.K)(i)?(n=u,e=B.y,o=i):(n=u,e=i),new g.y(s=>{let l=n;if(o)return o.schedule(Ut,0,{subscriber:s,iterate:r,condition:a,resultSelector:e,state:l});for(;;){if(a){let h;try{h=a(l)}catch(v){return void s.error(v)}if(!h){s.complete();break}}let d;try{d=e(l)}catch(h){return void s.error(h)}if(s.next(d),s.closed)break;try{l=r(l)}catch(h){return void s.error(h)}}})}function Ut(u){const{subscriber:a,condition:r}=u;if(a.closed)return;if(u.needIterate)try{u.state=u.iterate(u.state)}catch(o){return void a.error(o)}else u.needIterate=!0;if(r){let o;try{o=r(u.state)}catch(e){return void a.error(e)}if(!o)return void a.complete();if(a.closed)return}let i;try{i=u.resultSelector(u.state)}catch(o){return void a.error(o)}return a.closed||(a.next(i),a.closed)?void 0:this.schedule(u)}function wt(u,a=N.E,r=N.E){return(0,rt.P)(()=>u()?a:r)}var Ft=c(1715),W=c(6787);const V=new g.y(et.Z);function It(){return V}var Q=c(1086);function K(...u){if(0===u.length)return N.E;const[a,...r]=u;return 1===u.length&&(0,j.k)(a)?K(...a):new g.y(i=>{const o=()=>i.add(K(...r).subscribe(i));return(0,R.D)(a).subscribe({next(e){i.next(e)},error:o,complete:o})})}function kt(u,a){return new g.y(a?r=>{const i=Object.keys(u),o=new p.w;return o.add(a.schedule(Et,0,{keys:i,index:0,subscriber:r,subscription:o,obj:u})),o}:r=>{const i=Object.keys(u);for(let o=0;o<i.length&&!r.closed;o++){const e=i[o];u.hasOwnProperty(e)&&r.next([e,u[e]])}r.complete()})}function Et(u){const{keys:a,index:r,subscriber:i,subscription:o,obj:e}=u;if(!i.closed)if(r<a.length){const n=a[r];i.next([n,e[n]]),o.add(this.schedule({keys:a,index:r+1,subscriber:i,subscription:o,obj:e}))}else i.complete()}function Ot(u,a){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=u,r.thisArg=a,r}var dt=c(9249),ut=c(2198);function jt(u,a,r){return[(0,ut.h)(a,r)(new g.y((0,dt.s)(u))),(0,ut.h)(Ot(a,r))(new g.y((0,dt.s)(u)))]}var pt=c(3009),Nt=c(826),Jt=c(448);function Lt(...u){if(1===u.length){if(!(0,j.k)(u[0]))return u[0];u=u[0]}return(0,pt.n)(u,void 0).lift(new qt)}class qt{call(a,r){return r.subscribe(new Rt(a))}}class Rt extends Nt.L{constructor(a){super(a),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(a){this.observables.push(a)}_complete(){const a=this.observables,r=a.length;if(0===r)this.destination.complete();else{for(let i=0;i<r&&!this.hasFirst;i++){const e=(0,Jt.D)(this,a[i],void 0,i);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(a,r,i){if(!this.hasFirst){this.hasFirst=!0;for(let o=0;o<this.subscriptions.length;o++)if(o!==i){let e=this.subscriptions[o];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(r)}}function Qt(u=0,a,r){return new g.y(i=>{void 0===a&&(a=u,u=0);let o=0,e=u;if(r)return r.schedule(Yt,0,{index:o,count:a,start:u,subscriber:i});for(;;){if(o++>=a){i.complete();break}if(i.next(e++),i.closed)break}})}function Yt(u){const{start:a,index:r,count:i,subscriber:o}=u;r>=i?o.complete():(o.next(a),!o.closed&&(u.index=r+1,u.start=a+1,this.schedule(u)))}var Bt=c(1737),zt=c(8723);function Ht(u,a){return new g.y(r=>{let i,o;try{i=u()}catch(s){return void r.error(s)}try{o=a(i)}catch(s){return void r.error(s)}const n=(o?(0,R.D)(o):N.E).subscribe(r);return()=>{n.unsubscribe(),i&&i.unsubscribe()}})}var $=c(5430),G=c(1177);function Wt(...u){const a=u[u.length-1];return"function"==typeof a&&u.pop(),(0,pt.n)(u,void 0).lift(new Vt(a))}class Vt{constructor(a){this.resultSelector=a}call(a,r){return r.subscribe(new Kt(a,this.resultSelector))}}class Kt extends mt.L{constructor(a,r,i=Object.create(null)){super(a),this.resultSelector=r,this.iterators=[],this.active=0,this.resultSelector="function"==typeof r?r:void 0}_next(a){const r=this.iterators;(0,j.k)(a)?r.push(new Gt(a)):r.push("function"==typeof a[$.hZ]?new $t(a[$.hZ]()):new Xt(this.destination,this,a))}_complete(){const a=this.iterators,r=a.length;if(this.unsubscribe(),0!==r){this.active=r;for(let i=0;i<r;i++){let o=a[i];o.stillUnsubscribed?this.destination.add(o.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const a=this.iterators,r=a.length,i=this.destination;for(let n=0;n<r;n++){let s=a[n];if("function"==typeof s.hasValue&&!s.hasValue())return}let o=!1;const e=[];for(let n=0;n<r;n++){let s=a[n],l=s.next();if(s.hasCompleted()&&(o=!0),l.done)return void i.complete();e.push(l.value)}this.resultSelector?this._tryresultSelector(e):i.next(e),o&&i.complete()}_tryresultSelector(a){let r;try{r=this.resultSelector.apply(this,a)}catch(i){return void this.destination.error(i)}this.destination.next(r)}}class $t{constructor(a){this.iterator=a,this.nextResult=a.next()}hasValue(){return!0}next(){const a=this.nextResult;return this.nextResult=this.iterator.next(),a}hasCompleted(){const a=this.nextResult;return Boolean(a&&a.done)}}class Gt{constructor(a){this.array=a,this.index=0,this.length=0,this.length=a.length}[$.hZ](){return this}next(a){const r=this.index++;return r<this.length?{value:this.array[r],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Xt extends G.Ds{constructor(a,r,i){super(a),this.parent=r,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[$.hZ](){return this}next(){const a=this.buffer;return 0===a.length&&this.isComplete?{value:null,done:!0}:{value:a.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(a){this.buffer.push(a),this.parent.checkIterators()}subscribe(){return(0,G.ft)(this.observable,new G.IY(this))}}var te=c(3998),ee=c(2830)},2185:(O,C,c)=>{"use strict";c.d(C,{c:()=>p});var g=c(8929),T=c(4096);class p extends g.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),T.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),T.w.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},7456:(O,C,c)=>{"use strict";c(2231)}}]);