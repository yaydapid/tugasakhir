"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[651],{7651:(ct,T,c)=>{c.r(T),c.d(T,{AnalyticsModule:()=>ot});var d=c(9808),k=c(4738),m=c(3254),v=c(2497),y=c(449),h=c(5331),p=c(4847),s=c(8279),x=c(5080),g=c(7313),t=c(5e3);let b=(()=>{class n extends g.Z{constructor(){super(),this.defineOptions({chartTitle:"Thickness vs Year",yTitle:"Thickness (mm)",xTitle:"Year"})}ngOnInit(){this.generateChart("Thickness")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-thickness-chart"]],features:[t.qOj],decls:1,vars:0,consts:[["id","Thickness"]],template:function(e,i){1&e&&t._UZ(0,"canvas",0)},encapsulation:2}),n})(),R=(()=>{class n extends g.Z{constructor(){super(),this.defineOptions({chartTitle:"Corrosion Rate vs Year",yTitle:"CR",xTitle:"Piping"})}ngOnInit(){this.generateChart("CorrosionR")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-corrosionR-chart"]],features:[t.qOj],decls:1,vars:0,consts:[["id","CorrosionR"]],template:function(e,i){1&e&&t._UZ(0,"canvas",0)},encapsulation:2}),n})(),D=(()=>{class n extends g.Z{constructor(){super(),this.defineOptions({chartTitle:"Remaining Life vs Year",yTitle:"Remaining Life (years)",xTitle:"Year"})}ngOnInit(){this.generateChart("Remaining")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-remaining-chart"]],features:[t.qOj],decls:1,vars:0,consts:[["id","Remaining"]],template:function(e,i){1&e&&t._UZ(0,"canvas",0)},encapsulation:2}),n})();var A=c(9371),Z=c(7024),C=c(4204),f=c(7531);function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().filterByClass(r)}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const L=function(){return{width:"40px"}};function H(n,a){1&n&&(t.TgZ(0,"th",19),t._uU(1," Piping ID "),t.qZA()),2&n&&t.Q6J("ngStyle",t.DdM(1,L))}const J=function(n){return{color:n}};function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",20,21),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(1).style.color="#0492c2"})("mouseout",function(){const r=t.CHM(e).$implicit;return t.MAs(1).style.color=t.oxw(2).selectionData.piping_id==r.piping_id?"#0492c2":"black"})("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).showData(r)}),t._uU(2),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,J,i.selectionData.piping_id==e.piping_id?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_id," ")}}function Y(n,a){1&n&&t._UZ(0,"tr",22)}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",23),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).selection.toggle(r)}),t.qZA()}}function F(n,a){if(1&n&&(t.TgZ(0,"table",13),t.ynx(1,14),t.YNc(2,H,2,2,"th",15),t.YNc(3,O,3,4,"td",16),t.BQk(),t.YNc(4,Y,1,0,"tr",17),t.YNc(5,N,1,0,"tr",18),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}const Q=function(){return["All",1,2,3,4]};x.kL.register(...x.zX);let U=(()=>{class n{constructor(e,i){this.thicknessService=e,this.variables=i,this.tableData=[],this.displayedColumns=["piping_id"],this.selection=new y.Ov(!0,[]),this.resultsLength=0}ngOnInit(){this.thicknessService.getDataThickness().subscribe(({data:e})=>{this.selectionData=e[0],this.tableData=e,this.dataSource=new s.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showData(this.selectionData)})}showData(e){this.selectionData=e,this.variables.removeChartData(this.thicknessChart),this.variables.removeChartData(this.corrosionChart),this.variables.removeChartData(this.remainingChart),e&&(this.thicknessChartData(this.thicknessChart,e),this.corrosionChartData(this.corrosionChart,e),this.remainingLifeChartData(this.remainingChart,e))}filterByClass(e){let i=this.tableData.filter(o=>o.class==e);"All"==e&&(i=this.tableData),this.dataSource=new s.by(i)}thicknessChartData(e,{cml:i}){const{datasets:o,allYear:r}=this.variables.getCharCML(null!=i?i:[],"last_thickness_reading");e.data.labels=r,e.chart.data.datasets=o,e.chart.update()}corrosionChartData(e,i){const o=this.variables.getCMLCalc(i),{datasets:r,allYear:l}=this.variables.getCharCML(o,"lt_cr");e.data.labels=l,e.chart.data.datasets=r,e.chart.update()}remainingLifeChartData(e,i){const o=this.variables.getCMLCalc(i),{datasets:r,allYear:l}=this.variables.getCharCML(o,"remaining_life");e.data.labels=l,e.chart.data.datasets=r,e.chart.update()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.O),t.Y36(Z.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-corrosion-rate-trend"]],viewQuery:function(e,i){if(1&e&&(t.Gf(h.NW,5),t.Gf(p.YE,5),t.Gf(b,5),t.Gf(R,5),t.Gf(D,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first),t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.thicknessChart=o.first),t.iGM(o=t.CRH())&&(i.corrosionChart=o.first),t.iGM(o=t.CRH())&&(i.remainingChart=o.first)}},decls:25,vars:4,consts:[[1,"d-flex","justify-content-between"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"row"],[1,"col"],["placeholder","Class","status","primary","size","small",1,"mx-5"],[3,"value","click",4,"ngFor","ngForOf"],[1,"col-3"],["matSort","","style","width: 100%; box-shadow: none;","mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["aria-label","Select page of GitHub search results",3,"pageSize"],[1,"col-9"],[1,"my-2"],[3,"value","click"],["matSort","","mat-table","",1,"mat-elevation-z8",2,"width","100%","box-shadow","none",3,"dataSource"],["matColumnDef","piping_id"],["mat-header-cell","","mat-sort-header","",3,"ngStyle",4,"matHeaderCellDef"],["mat-cell","","style","cursor : pointer",3,"ngStyle","mouseover","mouseout","click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",3,"ngStyle"],["mat-cell","",2,"cursor","pointer",3,"ngStyle","mouseover","mouseout","click"],["nameCell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-header",0)(2,"div")(3,"h5"),t._uU(4,"CML Trend"),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7,"Hit Enter To Search"),t.qZA(),t.TgZ(8,"input",1,2),t.NdJ("keyup",function(r){return i.applyFilter(r)}),t.qZA()()(),t.TgZ(10,"div",3)(11,"div",4),t._uU(12,"Class"),t.qZA(),t.TgZ(13,"div",4)(14,"nb-select",5),t.YNc(15,M,2,2,"nb-option",6),t.qZA()()()(),t.TgZ(16,"nb-card-body")(17,"div",3)(18,"div",7),t.YNc(19,F,6,4,"table",8),t._UZ(20,"mat-paginator",9),t.qZA(),t.TgZ(21,"div",10),t._UZ(22,"ngx-thickness-chart",11)(23,"ngx-corrosionR-chart",11)(24,"ngx-remaining-chart",11),t.qZA()()()()),2&e&&(t.xp6(15),t.Q6J("ngForOf",t.DdM(3,Q)),t.xp6(4),t.Q6J("ngIf",i.selectionData),t.xp6(1),t.Q6J("pageSize",30))},directives:[m.Asz,m.ndF,C.KE,C.hX,f.Nt,m.rs,d.sg,m.q51,m.yKW,d.O5,s.BZ,p.YE,s.w1,s.fO,s.ge,p.nU,d.PC,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,h.NW,b,R,D],encapsulation:2}),n})(),S=(()=>{class n extends g.Z{constructor(){super(),this.chartType="bar",this.yLabels=[],this.legendPosition="bottom",this.showRightSclae=!0,this.datasets=[],this.defineOptions({chartTitle:"Chart Piping Circuit"})}ngOnInit(){this.generateChart("pipingCircuitChart")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-pipingCircuitChart-chart"]],features:[t.qOj],decls:1,vars:0,consts:[["id","pipingCircuitChart"]],template:function(e,i){1&e&&t._UZ(0,"canvas",0)},encapsulation:2}),n})();var G=c(2787);function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().filterByClass(r)}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const I=function(){return{width:"40px"}};function P(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Piping Circuit ID "),t.qZA()),2&n&&t.Q6J("ngStyle",t.DdM(1,I))}const j=function(n){return{color:n}};function E(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",18,19),t.NdJ("mouseover",function(){return t.CHM(e),t.MAs(1).style.color="#0492c2"})("mouseout",function(){const r=t.CHM(e).$implicit;return t.MAs(1).style.color=t.oxw().selectionData.piping_circuit_id==r.piping_circuit_id?"#0492c2":"black"})("click",function(){const r=t.CHM(e).$implicit;return t.oxw().showData(r)}),t._uU(2),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngStyle",t.VKq(2,j,i.selectionData.piping_circuit_id==e.piping_circuit_id?"#0492c2":"black")),t.xp6(2),t.hij(" ",e.piping_circuit_id," ")}}function q(n,a){1&n&&t._UZ(0,"tr",20)}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().selection.toggle(r)}),t.qZA()}}const X=function(){return["All",1,2,3,4]};let $=(()=>{class n{constructor(e,i){this.circuitService=e,this.variables=i,this.datasets=[{label:"Reading (mm)",yAxisID:"A",prop:"reading"},{label:"T minimum (mm)",yAxisID:"A",prop:"min_required_thickness"},{label:"Nominal Thickness (mm)",yAxisID:"A",prop:"nominal_thickness"},{label:"Corrosion Rate (mm/Year)",yAxisID:"B",prop:"lt_cr"}],this.tableData=[],this.displayedColumns=["piping_circuit_id"],this.selection=new y.Ov(!0,[])}ngOnInit(){this.circuitService.getPipingCircuits().subscribe(({data:e})=>{this.selectionData=e[0],this.showData(this.selectionData),this.tableData=e,this.dataSource=new s.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}showData(e){this.selectionData=e,e&&this.circuitChartData(this.circuitChart,e)}circuitChartData(e,i){const{piping:o}=i,r=null==o?void 0:o.map(u=>u.piping_id);this.variables.removeChartData(this.circuitChart);const l=o.map(u=>this.variables.getThicknessCalculation(u));e.data.labels=r;const _=this.datasets.map(u=>{const w="#"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),at=r.map(rt=>l.find(st=>st.piping_id==rt)[u.prop]);return Object.assign(Object.assign({},u),{borderColor:w,backgroundColor:w,data:at})});e.chart.data.datasets=_,e.chart.update()}filterByClass(e){let i=this.tableData.filter(o=>o.class==e);"All"==e&&(i=this.tableData),this.dataSource=new s.by(i)}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G.t),t.Y36(Z.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-remaining-life-trend"]],viewQuery:function(e,i){if(1&e&&(t.Gf(S,5),t.Gf(h.NW,5),t.Gf(p.YE,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.circuitChart=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first),t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:28,vars:7,consts:[[1,"d-flex","justify-content-between"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"row"],[1,"col"],["placeholder","Class","status","primary","size","small",1,"mx-5"],[3,"value","click",4,"ngFor","ngForOf"],[1,"col-3"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%","box-shadow","none",3,"dataSource"],["matColumnDef","piping_circuit_id"],["mat-header-cell","","mat-sort-header","",3,"ngStyle",4,"matHeaderCellDef"],["mat-cell","","style","cursor : pointer",3,"ngStyle","mouseover","mouseout","click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of GitHub search results",3,"pageSize"],[1,"col-9"],[3,"value","click"],["mat-header-cell","","mat-sort-header","",3,"ngStyle"],["mat-cell","",2,"cursor","pointer",3,"ngStyle","mouseover","mouseout","click"],["nameCell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-header",0)(2,"div")(3,"h5"),t._uU(4,"Piping Trend"),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7,"Hit Enter To Search"),t.qZA(),t.TgZ(8,"input",1,2),t.NdJ("keyup",function(r){return i.applyFilter(r)}),t.qZA()()(),t.TgZ(10,"div",3)(11,"div",4),t._uU(12,"Class"),t.qZA(),t.TgZ(13,"div",4)(14,"nb-select",5),t.YNc(15,z,2,2,"nb-option",6),t.qZA()()()(),t.TgZ(16,"nb-card-body")(17,"div",3)(18,"div",7)(19,"table",8),t.ynx(20,9),t.YNc(21,P,2,2,"th",10),t.YNc(22,E,3,4,"td",11),t.BQk(),t.YNc(23,q,1,0,"tr",12),t.YNc(24,B,1,0,"tr",13),t.qZA(),t._UZ(25,"mat-paginator",14),t.qZA(),t.TgZ(26,"div",15),t._UZ(27,"ngx-pipingCircuitChart-chart"),t.qZA()()()()),2&e&&(t.xp6(15),t.Q6J("ngForOf",t.DdM(6,X)),t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",30))},directives:[m.Asz,m.ndF,C.KE,C.hX,f.Nt,m.rs,d.sg,m.q51,m.yKW,s.BZ,p.YE,s.w1,s.fO,s.ge,p.nU,d.PC,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,h.NW,S],encapsulation:2}),n})();const W=[{path:"",component:c(3870).M,children:[{path:"corrosion-rate-trend",component:U},{path:"remaining-life-trend",component:$}]}];let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[v.Bz.forChild(W)],v.Bz]}),n})();var tt=c(9511),et=c(2368),nt=c(7446),it=c(4107);let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,k.O,m.j5J,m.IIj,V,m.zyh,tt.H,s.p0,et.rP,nt.p9,h.TU,C.lN,f.c,it.LD,p.JX]]}),n})()}}]);